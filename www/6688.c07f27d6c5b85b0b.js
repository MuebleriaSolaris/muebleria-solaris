"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(b,m,i)=>{i.r(m),i.d(m,{LoginPageModule:()=>v});var f=i(177),s=i(4341),a=i(7125),d=i(1671),h=i(467),n=i(4438),p=i(3656),P=i(4796);const M=["usernameInput"],C=[{path:"",component:(()=>{var o;class g{constructor(t,e,r,u){this.router=t,this.navCtrl=e,this.authService=r,this.toastController=u,this.username="",this.password="",this.showPassword=!1}ngOnInit(){setTimeout(()=>{this.usernameInput.nativeElement.focus()},100);const t=this.authService.getRole(),e=this.authService.getUserId();t&&e&&("4"===t?this.navCtrl.navigateRoot("/clientes"):"1"===t&&this.navCtrl.navigateRoot("/dashboard"))}showErrorToast(t){var e=this;return(0,h.A)(function*(){(yield e.toastController.create({message:t,duration:3e3,position:"bottom",color:"danger"})).present()})()}login(){this.authService.login(this.username,this.password).subscribe({next:t=>{if("success"===t.status){console.log("Login successful:",t.message),t.userId&&this.authService.setUserId(t.userId),t.role&&this.authService.setRole(t.role);const e=this.authService.getRole();"1"===e?this.navCtrl.navigateRoot("/dashboard"):"4"===e&&this.navCtrl.navigateRoot("/clientes")}else console.warn("Login failed:",t.message),this.showErrorToast("Login failed: "+t.message)},error:t=>{console.error("An error occurred:",t),this.showErrorToast("An error occurred. Please try again.")}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}}return(o=g).\u0275fac=function(t){return new(t||o)(n.rXU(d.Ix),n.rXU(p.q9),n.rXU(P.u),n.rXU(a.K_))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-login"]],viewQuery:function(t,e){if(1&t&&n.GBs(M,5),2&t){let r;n.mGM(r=n.lsd())&&(e.usernameInput=r.first)}},decls:20,vars:2,consts:[["usernameInput",""],[1,"page-content","ion-padding"],[1,"login-page"],[1,"login-header"],["src","assets/logo_img.png","alt","Logo",1,"logo"],[1,"app-name"],[1,"login-form"],[3,"ngSubmit"],[1,"custom-item"],["name","person-outline","slot","start",1,"input-icon"],["name","username","placeholder","Usuario","required","",3,"ngModelChange","ngModel"],["name","lock-closed-outline","slot","start",1,"input-icon"],["name","password","placeholder","Contrase\xf1a","type","text","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"custom-button"],[1,"forgot-password"],["href","#"]],template:function(t,e){if(1&t){const r=n.RV6();n.j41(0,"ion-content",1)(1,"div",2)(2,"div",3),n.nrm(3,"img",4),n.j41(4,"h2",5),n.EFF(5,"Muebler\xeda Solaris"),n.k0s()(),n.j41(6,"div",6)(7,"form",7),n.bIt("ngSubmit",function(){return n.eBV(r),n.Njj(e.login())}),n.j41(8,"ion-item",8),n.nrm(9,"ion-icon",9),n.j41(10,"ion-input",10,0),n.mxI("ngModelChange",function(l){return n.eBV(r),n.DH7(e.username,l)||(e.username=l),n.Njj(l)}),n.k0s()(),n.j41(12,"ion-item",8),n.nrm(13,"ion-icon",11),n.j41(14,"ion-input",12),n.mxI("ngModelChange",function(l){return n.eBV(r),n.DH7(e.password,l)||(e.password=l),n.Njj(l)}),n.k0s()(),n.j41(15,"ion-button",13),n.EFF(16,"Entrar"),n.k0s()(),n.j41(17,"p",14)(18,"a",15),n.EFF(19,"\xbfOlvidaste tu contrase\xf1a?"),n.k0s()()()()()}2&t&&(n.R7$(10),n.R50("ngModel",e.username),n.R7$(4),n.R50("ngModel",e.password))},dependencies:[s.qT,s.BC,s.cb,s.YS,s.vS,s.cV,a.Jm,a.W9,a.iq,a.$w,a.uz,a.Gw],styles:[".page-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #ffffff, #f5f7fa)}.page-content[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.page-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem}.page-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:7%}.page-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:90%;max-width:400px;background:#fff;padding:1.5rem;border-radius:10px;box-shadow:0 4px 6px #0000001a}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]{--background: #f9f9f9;border-radius:8px;margin-bottom:1rem}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#3b82f6}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:1rem}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-button[_ngcontent-%COMP%]{background:linear-gradient(45deg,#3b82f6,#4f46e5);color:#fff;font-weight:700;border-radius:12px;box-shadow:0 4px 6px #0000001a}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-button[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#4f46e5,#3b82f6)}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:underline;font-size:.9rem}"]}),g})()}];let O=(()=>{var o;class g{}return(o=g).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[d.iI.forChild(C),d.iI]}),g})(),v=(()=>{var o;class g{}return(o=g).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[f.MD,s.YN,a.bv,O]}),g})()}}]);