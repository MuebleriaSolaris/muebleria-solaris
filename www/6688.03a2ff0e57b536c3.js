"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(v,d,i)=>{i.r(d),i.d(d,{LoginPageModule:()=>O});var f=i(177),r=i(4341),s=i(4742),u=i(1671),n=i(4438),p=i(3656),h=i(4796);const P=["usernameInput"],M=[{path:"",component:(()=>{var t;class a{constructor(e,o,g){this.router=e,this.navCtrl=o,this.authService=g,this.username="",this.password="",this.showPassword=!1}ngOnInit(){setTimeout(()=>{this.usernameInput.nativeElement.focus()},100);const e=this.authService.getRole(),o=this.authService.getUserId();e&&o&&("4"===e?this.navCtrl.navigateRoot("/clientes"):"1"===e&&this.navCtrl.navigateRoot("/dashboard"))}login(){this.authService.login(this.username,this.password).subscribe({next:e=>{if("success"===e.status){console.log("Login successful:",e.message),e.userId&&this.authService.setUserId(e.userId),e.role&&this.authService.setRole(e.role);const o=this.authService.getRole();"1"===o?this.navCtrl.navigateRoot("/dashboard"):"4"===o&&this.navCtrl.navigateRoot("/clientes")}else console.warn("Login failed:",e.message),alert("Login failed: "+e.message)},error:e=>{console.error("An error occurred:",e),alert("An error occurred. Please try again.")}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}}return(t=a).\u0275fac=function(e){return new(e||t)(n.rXU(u.Ix),n.rXU(p.q9),n.rXU(h.u))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-login"]],viewQuery:function(e,o){if(1&e&&n.GBs(P,5),2&e){let g;n.mGM(g=n.lsd())&&(o.usernameInput=g.first)}},decls:20,vars:2,consts:[["usernameInput",""],[1,"page-content","ion-padding"],[1,"login-page"],[1,"login-header"],["src","assets/logo_img.png","alt","Logo",1,"logo"],[1,"app-name"],[1,"login-form"],[3,"ngSubmit"],[1,"custom-item"],["name","person-outline","slot","start",1,"input-icon"],["name","username","placeholder","Usuario","required","",3,"ngModelChange","ngModel"],["name","lock-closed-outline","slot","start",1,"input-icon"],["name","password","placeholder","Contrase\xf1a","type","text","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"custom-button"],[1,"forgot-password"],["href","#"]],template:function(e,o){if(1&e){const g=n.RV6();n.j41(0,"ion-content",1)(1,"div",2)(2,"div",3),n.nrm(3,"img",4),n.j41(4,"h2",5),n.EFF(5,"Muebler\xeda Solaris"),n.k0s()(),n.j41(6,"div",6)(7,"form",7),n.bIt("ngSubmit",function(){return n.eBV(g),n.Njj(o.login())}),n.j41(8,"ion-item",8),n.nrm(9,"ion-icon",9),n.j41(10,"ion-input",10,0),n.mxI("ngModelChange",function(l){return n.eBV(g),n.DH7(o.username,l)||(o.username=l),n.Njj(l)}),n.k0s()(),n.j41(12,"ion-item",8),n.nrm(13,"ion-icon",11),n.j41(14,"ion-input",12),n.mxI("ngModelChange",function(l){return n.eBV(g),n.DH7(o.password,l)||(o.password=l),n.Njj(l)}),n.k0s()(),n.j41(15,"ion-button",13),n.EFF(16,"Entrar"),n.k0s()(),n.j41(17,"p",14)(18,"a",15),n.EFF(19,"\xbfOlvidaste tu contrase\xf1a?"),n.k0s()()()()()}2&e&&(n.R7$(10),n.R50("ngModel",o.username),n.R7$(4),n.R50("ngModel",o.password))},dependencies:[r.qT,r.BC,r.cb,r.YS,r.vS,r.cV,s.Jm,s.W9,s.iq,s.$w,s.uz,s.Gw],styles:[".page-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #ffffff, #f5f7fa)}.page-content[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.page-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem}.page-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:7%}.page-content[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:90%;max-width:400px;background:#fff;padding:1.5rem;border-radius:10px;box-shadow:0 4px 6px #0000001a}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]{--background: #f9f9f9;border-radius:8px;margin-bottom:1rem}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#3b82f6}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:1rem}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-button[_ngcontent-%COMP%]{background:linear-gradient(45deg,#3b82f6,#4f46e5);color:#fff;font-weight:700;border-radius:12px;box-shadow:0 4px 6px #0000001a}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .custom-button[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#4f46e5,#3b82f6)}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.page-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:underline;font-size:.9rem}"]}),a})()}];let C=(()=>{var t;class a{}return(t=a).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[u.iI.forChild(M),u.iI]}),a})(),O=(()=>{var t;class a{}return(t=a).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[f.MD,r.YN,s.bv,C]}),a})()}}]);