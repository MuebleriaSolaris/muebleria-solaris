"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5945],{5945:(Y,p,l)=>{l.r(p),l.d(p,{UsuariosInfoPageModule:()=>v});var d=l(177),g=l(4341),a=l(7125),c=l(1671),_=l(467),e=l(4438),m=l(4796);const u=o=>({"font-weight":o});function h(o,s){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.JRh(null==n.user?null:n.user.name)}}function M(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-input",18),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG();return e.DH7(r.user.name,t)||(r.user.name=t),e.Njj(t)}),e.k0s()}if(2&o){const n=e.XpG();e.R50("ngModel",n.user.name)}}function I(o,s){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.JRh(null==n.user?null:n.user.username)}}function b(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-input",21),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG(2);return e.DH7(r.user.username,t)||(r.user.username=t),e.Njj(t)}),e.k0s()}if(2&o){const n=e.XpG(2);e.R50("ngModel",n.user.username)}}function x(o,s){if(1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",19),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Nombre de Usuario"),e.k0s(),e.DNE(5,I,2,1,"p",15)(6,b,1,1,"ion-input",20),e.k0s()()),2&o){const n=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,u,n.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("ngIf",n.isEditMode)}}function E(o,s){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.JRh(null==n.user?null:n.user.email)}}function C(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-input",24),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG(2);return e.DH7(r.user.email,t)||(r.user.email=t),e.Njj(t)}),e.k0s()}if(2&o){const n=e.XpG(2);e.R50("ngModel",n.user.email)}}function U(o,s){if(1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",22),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Correo Electr\xf3nico"),e.k0s(),e.DNE(5,E,2,1,"p",15)(6,C,1,1,"ion-input",23),e.k0s()()),2&o){const n=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,u,n.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("ngIf",n.isEditMode)}}function P(o,s){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.JRh(null==n.user?null:n.user.company_name)}}function k(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-input",27),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG(2);return e.DH7(r.user.company_name,t)||(r.user.company_name=t),e.Njj(t)}),e.k0s()}if(2&o){const n=e.XpG(2);e.R50("ngModel",n.user.company_name)}}function R(o,s){if(1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",25),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Empresa"),e.k0s(),e.DNE(5,P,2,1,"p",15)(6,k,1,1,"ion-input",26),e.k0s()()),2&o){const n=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,u,n.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("ngIf",n.isEditMode)}}function G(o,s){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.JRh(null==n.user?null:n.user.password)}}function j(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-input",30),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG(2);return e.DH7(r.user.password,t)||(r.user.password=t),e.Njj(t)}),e.k0s()}if(2&o){const n=e.XpG(2);e.R50("ngModel",n.user.password)}}function F(o,s){if(1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",28),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Contrase\xf1a"),e.k0s(),e.DNE(5,G,2,1,"p",15)(6,j,1,1,"ion-input",29),e.k0s()()),2&o){const n=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,u,n.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("ngIf",n.isEditMode)}}function y(o,s){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.JRh(null==n.user?null:n.user.phone)}}function w(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-input",33),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG(2);return e.DH7(r.user.phone,t)||(r.user.phone=t),e.Njj(t)}),e.k0s()}if(2&o){const n=e.XpG(2);e.R50("ngModel",n.user.phone)}}function T(o,s){if(1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",31),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Tel\xe9fono"),e.k0s(),e.DNE(5,y,2,1,"p",15)(6,w,1,1,"ion-input",32),e.k0s()()),2&o){const n=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,u,n.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("ngIf",n.isEditMode)}}function D(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-footer",34)(1,"div",35)(2,"ion-button",36),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveChanges())}),e.nrm(3,"ion-icon",37),e.EFF(4," Guardar "),e.k0s(),e.j41(5,"ion-button",38),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.cancelEdit())}),e.nrm(6,"ion-icon",39),e.EFF(7," Cancelar "),e.k0s()()()}}const N=[{path:"",component:(()=>{var o;class s{constructor(i,t,r,f){this.route=i,this.router=t,this.authService=r,this.alertController=f,this.user=null,this.isEditMode=!1}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id")||"",this.userId?this.loadUserDetails(this.userId):console.warn("No se recibi\xf3 ning\xfan ID en la URL.")}loadUserDetails(i){this.authService.getUserDetails(i).subscribe({next:t=>{this.user=t,this.originalUserData={...t},console.log("Detalles del usuario cargados:",this.user)},error:t=>{console.error("Error al cargar detalles del usuario:",t)}})}toggleEditMode(){this.isEditMode=!this.isEditMode}saveChanges(){var i=this;return(0,_.A)(function*(){yield(yield i.alertController.create({header:"Confirmar cambios",message:"\xbfEst\xe1s seguro de querer guardar los cambios?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:()=>{i.authService.updateUser(i.user.id,i.user).subscribe({next:r=>{console.log("Response from updateUser:",r),"success"===r.status?(i.isEditMode=!1,i.loadUserDetails(i.user.id),i.showAlert("\xc9xito","Usuario actualizado correctamente").then(()=>{window.location.reload()})):i.showAlert("Error","No se pudo actualizar el usuario")},error:r=>{console.error("Error updating user:",r),i.showAlert("Error","No se pudo actualizar el usuario")}})}}]})).present()})()}cancelEdit(){this.user={...this.originalUserData},this.isEditMode=!1}confirmDelete(){var i=this;return(0,_.A)(function*(){const t=i.authService.getUserId();if(!i.user||!i.user.id)return console.error("ID de usuario no definido"),void i.showAlert("Error","No se pudo obtener el ID del usuario");i.user.id!==t?yield(yield i.alertController.create({header:"Confirmar eliminaci\xf3n",message:"\xbfEst\xe1s seguro de querer eliminar este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",handler:()=>{i.deleteUser()}}]})).present():i.showAlert("Error","No puedes eliminar tu propio usuario")})()}deleteUser(){if(!this.user||!this.user.id)return console.error("ID de usuario no definido"),void this.showAlert("Error","No se pudo obtener el ID del usuario");console.log("Eliminando usuario con ID:",this.user.id),this.authService.deleteUser(this.user.id).subscribe({next:i=>{console.log("Respuesta del servidor:",i),i.success?(this.showAlert("\xc9xito","Usuario eliminado correctamente"),this.router.navigate(["/usuarios-sistema"]).then(()=>{window.location.reload()})):this.showAlert("Error","Error al eliminar el usuario: "+i.message)},error:i=>{console.error("Error en la solicitud:",i),this.showAlert("Error","No se pudo eliminar el usuario")}})}goBack(){this.router.navigate(["/usuarios-sistema"])}showAlert(i,t){var r=this;return(0,_.A)(function*(){yield(yield r.alertController.create({header:i,message:t,buttons:["OK"]})).present()})()}}return(o=s).\u0275fac=function(i){return new(i||o)(e.rXU(c.nX),e.rXU(c.Ix),e.rXU(m.u),e.rXU(a.hG))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-usuarios-info"]],decls:38,vars:12,consts:[[1,"profile-header"],[1,"profile-avatar"],["src","assets/user_src.png","alt","Usuario"],[1,"top-button-container"],["color","light",1,"regresar-button",3,"click"],["name","arrow-back-outline","slot","start"],["color","secondary",3,"click"],["name","create-outline","slot","start"],["color","danger",3,"click"],["name","trash-outline","slot","start"],[1,"account-info"],[1,"top-cliente"],["lines","none"],["name","person-outline","slot","start"],[3,"ngStyle"],[4,"ngIf"],["placeholder","Nombre completo",3,"ngModel","ngModelChange",4,"ngIf"],["class","edit-footer",4,"ngIf"],["placeholder","Nombre completo",3,"ngModelChange","ngModel"],["name","person-circle-outline","slot","start"],["placeholder","Nombre de usuario",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Nombre de usuario",3,"ngModelChange","ngModel"],["name","mail-outline","slot","start"],["type","email","placeholder","Correo electr\xf3nico",3,"ngModel","ngModelChange",4,"ngIf"],["type","email","placeholder","Correo electr\xf3nico",3,"ngModelChange","ngModel"],["name","business-outline","slot","start"],["placeholder","Empresa",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Empresa",3,"ngModelChange","ngModel"],["name","lock-closed-outline","slot","start"],["type","password","placeholder","Contrase\xf1a",3,"ngModel","ngModelChange",4,"ngIf"],["type","password","placeholder","Contrase\xf1a",3,"ngModelChange","ngModel"],["name","call-outline","slot","start"],["type","tel","placeholder","Tel\xe9fono",3,"ngModel","ngModelChange",4,"ngIf"],["type","tel","placeholder","Tel\xe9fono",3,"ngModelChange","ngModel"],[1,"edit-footer"],[1,"bottom-action-buttons"],["expand","block","color","success",1,"guardar-button",3,"click"],["slot","start","name","checkmark-outline"],["expand","block","color","danger",1,"cancelar-button",3,"click"],["slot","start","name","close-outline"]],template:function(i,t){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Informaci\xf3n del Usuario"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",0)(6,"ion-avatar",1),e.nrm(7,"img",2),e.k0s(),e.j41(8,"h2"),e.EFF(9),e.k0s()(),e.j41(10,"div",3)(11,"ion-button",4),e.bIt("click",function(){return t.goBack()}),e.nrm(12,"ion-icon",5),e.EFF(13," Regresar "),e.k0s(),e.j41(14,"ion-button",6),e.bIt("click",function(){return t.toggleEditMode()}),e.nrm(15,"ion-icon",7),e.EFF(16," Editar "),e.k0s(),e.j41(17,"ion-button",8),e.bIt("click",function(){return t.confirmDelete()}),e.nrm(18,"ion-icon",9),e.EFF(19," Eliminar "),e.k0s()(),e.j41(20,"div",10)(21,"div",11)(22,"h3"),e.EFF(23,"Detalles del Usuario"),e.k0s()(),e.j41(24,"ion-list",12)(25,"ion-item"),e.nrm(26,"ion-icon",13),e.j41(27,"ion-label")(28,"h2",14),e.EFF(29,"Nombre Completo"),e.k0s(),e.DNE(30,h,2,1,"p",15)(31,M,1,1,"ion-input",16),e.k0s()(),e.DNE(32,x,7,5,"ion-item",15)(33,U,7,5,"ion-item",15)(34,R,7,5,"ion-item",15)(35,F,7,5,"ion-item",15)(36,T,7,5,"ion-item",15),e.k0s(),e.DNE(37,D,8,0,"ion-footer",17),e.k0s()()),2&i&&(e.R7$(9),e.JRh(null==t.user?null:t.user.name),e.R7$(19),e.Y8G("ngStyle",e.eq3(10,u,t.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!t.isEditMode),e.R7$(),e.Y8G("ngIf",t.isEditMode),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.username),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.email),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.company_name),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.password),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.phone),e.R7$(),e.Y8G("ngIf",t.isEditMode))},dependencies:[d.bT,d.B3,g.BC,g.vS,a.mC,a.Jm,a.W9,a.M0,a.eU,a.iq,a.$w,a.uz,a.he,a.nf,a.BC,a.ai,a.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.profile-header[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;background:linear-gradient(to bottom,#3880ff,#dfdfdf);color:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:800px;margin:0 auto}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:10px;border-radius:50%;overflow:hidden;border:3px solid white}.top-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;padding:10px 0;background:#3880ff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;max-width:800px;margin:-20px auto 0}.top-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:auto;font-size:.9rem}.regresar-button[_ngcontent-%COMP%]::part(native){background-color:#fff!important;color:#2f4f4f}.account-info[_ngcontent-%COMP%]{padding:30px;margin:30px auto;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0000001a;max-width:700px;text-align:left}ion-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:5px}ion-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:#666}.bottom-action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 0 0;margin:0 auto;max-width:700px}.bottom-action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 10px;font-weight:700;color:#fff;--border-radius: 8px;--padding: 10px 0}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.cancelar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #dc3545, #c82333)}@media (min-width: 768px){.profile-header[_ngcontent-%COMP%], .account-info[_ngcontent-%COMP%], .top-button-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.top-button-container[_ngcontent-%COMP%]{margin-top:-15px}}.edit-footer[_ngcontent-%COMP%]{box-shadow:none}"]}),s})()}];let X=(()=>{var o;class s{}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.iI.forChild(N),c.iI]}),s})(),v=(()=>{var o;class s{}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[d.MD,g.YN,a.bv,X]}),s})()}}]);