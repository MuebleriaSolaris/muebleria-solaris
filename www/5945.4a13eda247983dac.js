"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5945],{5945:(O,p,u)=>{u.r(p),u.d(p,{UsuariosInfoPageModule:()=>N});var f=u(177),_=u(4341),a=u(7125),g=u(620),c=u(467),e=u(4438),m=u(4796);const d=n=>({"font-weight":n});function h(n,s){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.JRh(null==o.user?null:o.user.name)}}function M(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-input",18),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG();return e.DH7(r.user.name,t)||(r.user.name=t),e.Njj(t)}),e.k0s()}if(2&n){const o=e.XpG();e.R50("ngModel",o.user.name)}}function I(n,s){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&n){const o=e.XpG(2);e.R7$(),e.JRh(null==o.user?null:o.user.username)}}function b(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-input",21),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG(2);return e.DH7(r.user.username,t)||(r.user.username=t),e.Njj(t)}),e.k0s()}if(2&n){const o=e.XpG(2);e.R50("ngModel",o.user.username)}}function x(n,s){if(1&n&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",19),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Nombre de Usuario"),e.k0s(),e.DNE(5,I,2,1,"p",15)(6,b,1,1,"ion-input",20),e.k0s()()),2&n){const o=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,d,o.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!o.isEditMode),e.R7$(),e.Y8G("ngIf",o.isEditMode)}}function E(n,s){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&n){const o=e.XpG(2);e.R7$(),e.JRh(null==o.user?null:o.user.email)}}function U(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-input",24),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG(2);return e.DH7(r.user.email,t)||(r.user.email=t),e.Njj(t)}),e.k0s()}if(2&n){const o=e.XpG(2);e.R50("ngModel",o.user.email)}}function C(n,s){if(1&n&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",22),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Correo Electr\xf3nico"),e.k0s(),e.DNE(5,E,2,1,"p",15)(6,U,1,1,"ion-input",23),e.k0s()()),2&n){const o=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,d,o.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!o.isEditMode),e.R7$(),e.Y8G("ngIf",o.isEditMode)}}function P(n,s){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&n){const o=e.XpG(2);e.R7$(),e.JRh(null==o.user?null:o.user.company_name)}}function k(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-input",27),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG(2);return e.DH7(r.user.company_name,t)||(r.user.company_name=t),e.Njj(t)}),e.k0s()}if(2&n){const o=e.XpG(2);e.R50("ngModel",o.user.company_name)}}function R(n,s){if(1&n&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",25),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Empresa"),e.k0s(),e.DNE(5,P,2,1,"p",15)(6,k,1,1,"ion-input",26),e.k0s()()),2&n){const o=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,d,o.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!o.isEditMode),e.R7$(),e.Y8G("ngIf",o.isEditMode)}}function G(n,s){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&n){const o=e.XpG(2);e.R7$(),e.JRh(null==o.user?null:o.user.password)}}function j(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-input",30),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG(2);return e.DH7(r.user.password,t)||(r.user.password=t),e.Njj(t)}),e.k0s()}if(2&n){const o=e.XpG(2);e.R50("ngModel",o.user.password)}}function F(n,s){if(1&n&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",28),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Contrase\xf1a"),e.k0s(),e.DNE(5,G,2,1,"p",15)(6,j,1,1,"ion-input",29),e.k0s()()),2&n){const o=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,d,o.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!o.isEditMode),e.R7$(),e.Y8G("ngIf",o.isEditMode)}}function y(n,s){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&n){const o=e.XpG(2);e.R7$(),e.JRh(null==o.user?null:o.user.phone)}}function D(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-input",33),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG(2);return e.DH7(r.user.phone,t)||(r.user.phone=t),e.Njj(t)}),e.k0s()}if(2&n){const o=e.XpG(2);e.R50("ngModel",o.user.phone)}}function w(n,s){if(1&n&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",31),e.j41(2,"ion-label")(3,"h2",14),e.EFF(4,"Tel\xe9fono"),e.k0s(),e.DNE(5,y,2,1,"p",15)(6,D,1,1,"ion-input",32),e.k0s()()),2&n){const o=e.XpG();e.R7$(3),e.Y8G("ngStyle",e.eq3(3,d,o.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!o.isEditMode),e.R7$(),e.Y8G("ngIf",o.isEditMode)}}function T(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-footer",34)(1,"div",35)(2,"ion-button",36),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.saveChanges())}),e.nrm(3,"ion-icon",37),e.EFF(4," Guardar "),e.k0s(),e.j41(5,"ion-button",38),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.cancelEdit())}),e.nrm(6,"ion-icon",39),e.EFF(7," Cancelar "),e.k0s()()()}}const v=[{path:"",component:(()=>{var n;class s{constructor(i,t,r,l){this.route=i,this.router=t,this.authService=r,this.alertController=l,this.user=null,this.isEditMode=!1,this.loading=!1,this.error=null,this.isDeleting=!1,this.isUpdating=!1}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id")||"",this.userId?this.loadUserDetails(this.userId):console.warn("No se recibi\xf3 ning\xfan ID en la URL.")}loadUserDetails(i){this.loading=!0,this.error=null,this.authService.getUserDetails(i).subscribe({next:t=>{this.loading=!1,this.user=t,this.originalUserData={...t},console.log("Detalles del usuario cargados:",this.user)},error:t=>{this.loading=!1,this.error=t.message||"Error al cargar detalles del usuario",console.error("Error al cargar detalles del usuario:",t)}})}toggleEditMode(){this.isEditMode=!this.isEditMode}saveChanges(){var i=this;return(0,c.A)(function*(){yield(yield i.alertController.create({header:"Confirmar cambios",message:"\xbfEst\xe1s seguro de querer guardar los cambios?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{i.resetForm()}},{text:"Guardar",handler:()=>(i.confirmUpdate(),!1)}]})).present()})()}confirmUpdate(){this.isUpdating=!0,this.authService.updateUser(this.user.id,this.user.name,this.user.username).subscribe({next:i=>{this.isUpdating=!1,!0===i.updated?this.showAlert("\xc9xito",i.message).then(()=>{this.isEditMode=!1,this.loadUserDetails(this.user.id),this.alertController&&this.alertController.dismiss()}):this.showAlert("Informaci\xf3n","No se realizaron cambios")},error:i=>{this.isUpdating=!1,this.showAlert("Error",i.message||"Error al actualizar")}})}resetForm(){this.originalUserData&&(this.user={...this.originalUserData})}cancelEdit(){this.user={...this.originalUserData},this.isEditMode=!1}confirmDelete(){var i=this;return(0,c.A)(function*(){const t=i.authService.getUserId();if(!i.user||!i.user.id)return console.error("ID de usuario no definido"),void i.showAlert("Error","No se pudo obtener el ID del usuario");i.user.id!==t?yield(yield i.alertController.create({header:"Confirmar eliminaci\xf3n",message:"\xbfEst\xe1s seguro de querer eliminar este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",handler:()=>{i.deleteUser()}}]})).present():i.showAlert("Error","No puedes eliminar tu propio usuario")})()}deleteUser(){var i=this;return(0,c.A)(function*(){var t,r;null!==(t=i.user)&&void 0!==t&&t.id?(i.isDeleting=!0,i.authService.deleteUser(i.user.id).subscribe({next:(r=(0,c.A)(function*(l){i.isDeleting=!1,l.success&&l.deleted?(yield i.showAlert("\xc9xito",l.message),i.router.navigate(["/usuarios-sistema"]).then(()=>{window.location.reload()})):yield i.showAlert("Informaci\xf3n",l.message||"No se pudo eliminar el usuario")}),function(Y){return r.apply(this,arguments)}),error:function(){var r=(0,c.A)(function*(l){i.isDeleting=!1,console.error("Error eliminando usuario:",l),yield i.showAlert("Error",l.message||"Error al comunicarse con el servidor")});return function(Y){return r.apply(this,arguments)}}()})):yield i.showAlert("Error","No se pudo obtener el ID del usuario")})()}goBack(){this.router.navigate(["/usuarios-sistema"])}showAlert(i,t){var r=this;return(0,c.A)(function*(){const l=yield r.alertController.create({header:i,message:t,buttons:["OK"]});yield l.present(),yield l.onDidDismiss()})()}}return(n=s).\u0275fac=function(i){return new(i||n)(e.rXU(g.nX),e.rXU(g.Ix),e.rXU(m.u),e.rXU(a.hG))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-usuarios-info"]],decls:38,vars:12,consts:[[1,"profile-header"],[1,"profile-avatar"],["src","assets/user_src.png","alt","Usuario"],[1,"top-button-container"],["color","light",1,"regresar-button",3,"click"],["name","arrow-back-outline","slot","start"],["color","secondary",3,"click"],["name","create-outline","slot","start"],["color","danger",3,"click"],["name","trash-outline","slot","start"],[1,"account-info"],[1,"top-cliente"],["lines","none"],["name","person-outline","slot","start"],[3,"ngStyle"],[4,"ngIf"],["placeholder","Nombre completo",3,"ngModel","ngModelChange",4,"ngIf"],["class","edit-footer",4,"ngIf"],["placeholder","Nombre completo",3,"ngModelChange","ngModel"],["name","person-circle-outline","slot","start"],["placeholder","Nombre de usuario",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Nombre de usuario",3,"ngModelChange","ngModel"],["name","mail-outline","slot","start"],["type","email","placeholder","Correo electr\xf3nico",3,"ngModel","ngModelChange",4,"ngIf"],["type","email","placeholder","Correo electr\xf3nico",3,"ngModelChange","ngModel"],["name","business-outline","slot","start"],["placeholder","Empresa",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Empresa",3,"ngModelChange","ngModel"],["name","lock-closed-outline","slot","start"],["type","password","placeholder","Contrase\xf1a",3,"ngModel","ngModelChange",4,"ngIf"],["type","password","placeholder","Contrase\xf1a",3,"ngModelChange","ngModel"],["name","call-outline","slot","start"],["type","tel","placeholder","Tel\xe9fono",3,"ngModel","ngModelChange",4,"ngIf"],["type","tel","placeholder","Tel\xe9fono",3,"ngModelChange","ngModel"],[1,"edit-footer"],[1,"bottom-action-buttons"],["expand","block","color","success",1,"guardar-button",3,"click"],["slot","start","name","checkmark-outline"],["expand","block","color","danger",1,"cancelar-button",3,"click"],["slot","start","name","close-outline"]],template:function(i,t){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Informaci\xf3n del Usuario"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",0)(6,"ion-avatar",1),e.nrm(7,"img",2),e.k0s(),e.j41(8,"h2"),e.EFF(9),e.k0s()(),e.j41(10,"div",3)(11,"ion-button",4),e.bIt("click",function(){return t.goBack()}),e.nrm(12,"ion-icon",5),e.EFF(13," Regresar "),e.k0s(),e.j41(14,"ion-button",6),e.bIt("click",function(){return t.toggleEditMode()}),e.nrm(15,"ion-icon",7),e.EFF(16," Editar "),e.k0s(),e.j41(17,"ion-button",8),e.bIt("click",function(){return t.confirmDelete()}),e.nrm(18,"ion-icon",9),e.EFF(19," Eliminar "),e.k0s()(),e.j41(20,"div",10)(21,"div",11)(22,"h3"),e.EFF(23,"Detalles del Usuario"),e.k0s()(),e.j41(24,"ion-list",12)(25,"ion-item"),e.nrm(26,"ion-icon",13),e.j41(27,"ion-label")(28,"h2",14),e.EFF(29,"Nombre Completo"),e.k0s(),e.DNE(30,h,2,1,"p",15)(31,M,1,1,"ion-input",16),e.k0s()(),e.DNE(32,x,7,5,"ion-item",15)(33,C,7,5,"ion-item",15)(34,R,7,5,"ion-item",15)(35,F,7,5,"ion-item",15)(36,w,7,5,"ion-item",15),e.k0s(),e.DNE(37,T,8,0,"ion-footer",17),e.k0s()()),2&i&&(e.R7$(9),e.JRh(null==t.user?null:t.user.name),e.R7$(19),e.Y8G("ngStyle",e.eq3(10,d,t.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!t.isEditMode),e.R7$(),e.Y8G("ngIf",t.isEditMode),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.username),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.email),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.company_name),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.password),e.R7$(),e.Y8G("ngIf",null==t.user?null:t.user.phone),e.R7$(),e.Y8G("ngIf",t.isEditMode))},dependencies:[f.bT,f.B3,_.BC,_.vS,a.mC,a.Jm,a.W9,a.M0,a.eU,a.iq,a.$w,a.uz,a.he,a.nf,a.BC,a.ai,a.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.profile-header[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;background:linear-gradient(to bottom,#3880ff,#dfdfdf);color:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:800px;margin:0 auto}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:10px;border-radius:50%;overflow:hidden;border:3px solid white}.top-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;padding:10px 0;background:#3880ff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;max-width:800px;margin:-20px auto 0}.top-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:auto;font-size:.9rem}.regresar-button[_ngcontent-%COMP%]::part(native){background-color:#fff!important;color:#2f4f4f}.account-info[_ngcontent-%COMP%]{padding:30px;margin:30px auto;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0000001a;max-width:700px;text-align:left}ion-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:5px}ion-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:#666}.bottom-action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 0 0;margin:0 auto;max-width:700px}.bottom-action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 10px;font-weight:700;color:#fff;--border-radius: 8px;--padding: 10px 0}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.cancelar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #dc3545, #c82333)}@media (min-width: 768px){.profile-header[_ngcontent-%COMP%], .account-info[_ngcontent-%COMP%], .top-button-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.top-button-container[_ngcontent-%COMP%]{margin-top:-15px}}.edit-footer[_ngcontent-%COMP%]{box-shadow:none}"]}),s})()}];let X=(()=>{var n;class s{}return(n=s).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.iI.forChild(v),g.iI]}),s})(),N=(()=>{var n;class s{}return(n=s).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.MD,_.YN,a.bv,X]}),s})()}}]);