"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9646],{9646:(F,g,r)=>{r.r(g),r.d(g,{ListaPedidoPageModule:()=>O});var c=r(177),p=r(4341),a=r(7125),l=r(620),t=r(4438),P=r(4934),u=r(3656);function _(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",5)(1,"p")(2,"strong"),t.EFF(3,"Costo total:"),t.k0s(),t.EFF(4),t.k0s(),t.j41(5,"ion-button",6),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.goBack())}),t.EFF(6,"Regresar"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(4),t.SpI(" $",e.totalCost,"")}}function f(n,d){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s()()),2&n){const e=d.$implicit;t.R7$(2),t.JRh(e.product_name),t.R7$(2),t.JRh(e.current_stock),t.R7$(2),t.JRh(e.max_amount-e.current_stock)}}function C(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",7)(1,"table")(2,"thead")(3,"tr")(4,"th"),t.EFF(5,"Producto"),t.k0s(),t.j41(6,"th"),t.EFF(7,"En Existencia"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Faltantes"),t.k0s()()(),t.j41(10,"tbody"),t.DNE(11,f,7,3,"tr",8),t.k0s()(),t.j41(12,"div",9)(13,"ion-button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.goBack())}),t.EFF(14,"Regresar"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(11),t.Y8G("ngForOf",e.getProductsWithMissingItems())}}function M(n,d){if(1&n&&(t.j41(0,"div",13)(1,"h3"),t.EFF(2),t.k0s(),t.j41(3,"p")(4,"strong"),t.EFF(5,"En existencia:"),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"p")(8,"strong"),t.EFF(9,"Faltantes:"),t.k0s(),t.EFF(10),t.k0s()()),2&n){const e=d.$implicit;t.R7$(2),t.JRh(e.product_name),t.R7$(4),t.SpI(" ",e.current_stock,""),t.R7$(4),t.SpI(" ",e.max_amount-e.current_stock,"")}}function h(n,d){if(1&n&&(t.j41(0,"div",11),t.DNE(1,M,11,3,"div",12),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.getProductsWithMissingItems())}}const m=[{path:"",component:(()=>{var n;class d{constructor(o,i,s){this.route=o,this.inventoryService=i,this.navCtrl=s,this.providerId=null,this.providerName="",this.providerProducts=[],this.totalCost=0,this.isLargeScreen=window.innerWidth>425}ngOnInit(){this.providerId=Number(this.route.snapshot.paramMap.get("id"))}ionViewWillEnter(){this.providerId&&this.loadProviderProducts(this.providerId)}onResize(o){this.isLargeScreen=o.target.innerWidth>425}loadProviderProducts(o){this.inventoryService.getProductsByProvider(o).subscribe({next:i=>{var s;i.success?(this.providerProducts=i.data,this.providerProducts.length>0&&(this.providerName=(null===(s=this.providerProducts[0])||void 0===s?void 0:s.provider_name)||""),this.calculateTotalCost()):console.warn("No se pudieron cargar los productos del proveedor.")},error:i=>{console.error("Error al cargar productos del proveedor:",i)}})}getProductsWithMissingItems(){return this.providerProducts.filter(o=>o.max_amount-o.current_stock>0&&1!==o.hide_product)}calculateTotalCost(){this.totalCost=this.providerProducts.reduce((o,i)=>1!==i.hide_product?o+(i.max_amount-i.current_stock)*i.credit_price:o,0)}goBack(){this.navCtrl.back()}}return(n=d).\u0275fac=function(o){return new(o||n)(t.rXU(l.nX),t.rXU(P.c),t.rXU(u.q9))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-lista-pedido"]],hostBindings:function(o,i){1&o&&t.bIt("resize",function(x){return i.onResize(x)},!1,t.tSv)},decls:13,vars:4,consts:[["slot","start"],[1,"pedido-container"],["class","mobile-total",4,"ngIf"],["class","pedido-table",4,"ngIf"],["class","pedido-list",4,"ngIf"],[1,"mobile-total"],["expand","full",3,"click"],[1,"pedido-table"],[4,"ngFor","ngForOf"],[1,"table-total"],[3,"click"],[1,"pedido-list"],["class","pedido-card",4,"ngFor","ngForOf"],[1,"pedido-card"]],template:function(o,i){1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Lista de Pedido"),t.k0s()()(),t.j41(6,"ion-content")(7,"div",1)(8,"h2"),t.EFF(9),t.k0s(),t.DNE(10,_,7,1,"div",2)(11,C,15,1,"div",3)(12,h,2,1,"div",4),t.k0s()()),2&o&&(t.R7$(9),t.SpI("Pedido para el proveedor: ",i.providerName,""),t.R7$(),t.Y8G("ngIf",!i.isLargeScreen),t.R7$(),t.Y8G("ngIf",i.isLargeScreen),t.R7$(),t.Y8G("ngIf",!i.isLargeScreen))},dependencies:[c.Sq,c.bT,a.Jm,a.QW,a.W9,a.eU,a.BC,a.ai,a.el],styles:['@charset "UTF-8";.pedido-container[_ngcontent-%COMP%]{padding:16px}.pedido-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:18px;margin-bottom:16px}.pedido-container[_ngcontent-%COMP%]   .mobile-total[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:700;color:#333;margin-bottom:16px}.pedido-container[_ngcontent-%COMP%]   .mobile-total[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:16px}.pedido-container[_ngcontent-%COMP%]   .table-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:row-reverse;align-items:center;margin-top:16px;font-size:16px;font-weight:700;color:#333}.pedido-container[_ngcontent-%COMP%]   .table-total[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:16px}.pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%], .pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;text-align:center}.pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]   .pedido-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 5px #0000001a;padding:16px;font-size:14px}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]   .pedido-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:700;color:#333}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]   .pedido-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;line-height:1.4}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]   .pedido-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:#555}@media (min-width: 426px){.mobile-total[_ngcontent-%COMP%], .pedido-list[_ngcontent-%COMP%]{display:none}.pedido-table[_ngcontent-%COMP%]{display:block}}@media (max-width: 425px){.pedido-table[_ngcontent-%COMP%]{display:none}.pedido-list[_ngcontent-%COMP%]{display:flex}}']}),d})()}];let v=(()=>{var n;class d{}return(n=d).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[l.iI.forChild(m),l.iI]}),d})(),O=(()=>{var n;class d{}return(n=d).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[c.MD,p.YN,a.bv,v]}),d})()}}]);