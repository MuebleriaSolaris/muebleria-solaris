"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7139],{7139:(x,b,s)=>{s.r(b),s.d(b,{ProductoPageModule:()=>Z});var _=s(177),m=s(4341),l=s(7125),g=s(5520),u=s(467),p=s(3114),C=s(2704),f=s(3207),t=s(4438),y=s(4934),E=s(3656),I=s(1626),k=s(4796),j=s(4191);let G=(()=>{var r;class a{constructor(){this.changesMap={}}setChangesDetected(e,o){this.changesMap[e]=o}hasChanges(e){return this.changesMap[e]||!1}reset(e){this.changesMap[e]=!1}}return(r=a).\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),a})();const h=r=>({"font-weight":r});function R(r,a){1&r&&t.nrm(0,"ion-spinner",32)}function S(r,a){if(1&r){const i=t.RV6();t.j41(0,"div",27),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.toggleProductVisibility())}),t.j41(1,"div",28)(2,"div",29),t.nrm(3,"div",30),t.k0s(),t.DNE(4,R,1,0,"ion-spinner",31),t.k0s()()}if(2&r){const i=t.XpG();t.R7$(2),t.AVh("hidden",1===(null==i.product?null:i.product.hide_product)),t.R7$(2),t.Y8G("ngIf",i.isUpdating)}}function O(r,a){if(1&r){const i=t.RV6();t.j41(0,"ion-input",35),t.mxI("ngModelChange",function(o){t.eBV(i);const n=t.XpG(2);return t.DH7(n.product.name,o)||(n.product.name=o),t.Njj(o)}),t.k0s()}if(2&r){const i=t.XpG(2);t.R50("ngModel",i.product.name)}}function F(r,a){if(1&r&&(t.j41(0,"ion-item"),t.nrm(1,"ion-icon",33),t.j41(2,"ion-label")(3,"h2",16),t.EFF(4,"Nombre"),t.k0s(),t.DNE(5,O,1,1,"ion-input",34),t.k0s()()),2&r){const i=t.XpG();t.R7$(3),t.Y8G("ngStyle",t.eq3(2,h,i.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",i.isEditMode)}}function D(r,a){if(1&r&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.SpI("$ ",t.i5U(2,1,null==i.product?null:i.product.credit_price,"1.2-2"),"")}}function w(r,a){if(1&r){const i=t.RV6();t.j41(0,"ion-input",36),t.mxI("ngModelChange",function(o){t.eBV(i);const n=t.XpG();return t.DH7(n.product.credit_price,o)||(n.product.credit_price=o),t.Njj(o)}),t.bIt("ionInput",function(o){t.eBV(i);const n=t.XpG();return t.Njj(n.validateCreditPriceInput(o))}),t.k0s()}if(2&r){const i=t.XpG();t.R50("ngModel",i.product.credit_price)}}function T(r,a){if(1&r&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&r){const i=t.XpG(2);t.R7$(),t.SpI("$ ",null==i.product?null:i.product.prov_price,"")}}function $(r,a){if(1&r){const i=t.RV6();t.j41(0,"ion-input",39),t.mxI("ngModelChange",function(o){t.eBV(i);const n=t.XpG(2);return t.DH7(n.product.prov_price,o)||(n.product.prov_price=o),t.Njj(o)}),t.bIt("ionInput",function(o){t.eBV(i);const n=t.XpG(2);return t.Njj(n.validateProvPriceInput(o))}),t.k0s()}if(2&r){const i=t.XpG(2);t.R50("ngModel",i.product.prov_price)}}function X(r,a){if(1&r&&(t.j41(0,"ion-item"),t.nrm(1,"ion-icon",37),t.j41(2,"ion-label")(3,"h2",16),t.EFF(4,"Precio Provedor"),t.k0s(),t.DNE(5,T,2,1,"p",14)(6,$,1,1,"ion-input",38),t.k0s()()),2&r){const i=t.XpG();t.R7$(3),t.Y8G("ngStyle",t.eq3(3,h,i.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!i.isEditMode),t.R7$(),t.Y8G("ngIf",i.isEditMode)}}function N(r,a){if(1&r&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.JRh(i.getSubCategoryName(i.product.sub_category_id))}}function A(r,a){if(1&r&&(t.j41(0,"ion-select-option",42),t.EFF(1),t.k0s()),2&r){const i=a.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.name," ")}}function V(r,a){if(1&r){const i=t.RV6();t.j41(0,"ion-select",40),t.mxI("ngModelChange",function(o){t.eBV(i);const n=t.XpG();return t.DH7(n.product.sub_category_id,o)||(n.product.sub_category_id=o),t.Njj(o)}),t.DNE(1,A,2,2,"ion-select-option",41),t.k0s()}if(2&r){const i=t.XpG();t.R50("ngModel",i.product.sub_category_id),t.R7$(),t.Y8G("ngForOf",i.subCategories)}}function Y(r,a){if(1&r&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.JRh(null==i.product?null:i.product.current_stock)}}function U(r,a){if(1&r){const i=t.RV6();t.j41(0,"ion-input",43),t.mxI("ngModelChange",function(o){t.eBV(i);const n=t.XpG();return t.DH7(n.product.current_stock,o)||(n.product.current_stock=o),t.Njj(o)}),t.bIt("ionInput",function(o){t.eBV(i);const n=t.XpG();return t.Njj(n.validateStockInput(o))}),t.k0s()}if(2&r){const i=t.XpG();t.R50("ngModel",i.product.current_stock)}}function B(r,a){if(1&r&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.JRh(null==i.product?null:i.product.max_amount)}}function z(r,a){if(1&r){const i=t.RV6();t.j41(0,"ion-input",43),t.mxI("ngModelChange",function(o){t.eBV(i);const n=t.XpG();return t.DH7(n.product.max_amount,o)||(n.product.max_amount=o),t.Njj(o)}),t.bIt("ionInput",function(o){t.eBV(i);const n=t.XpG();return t.Njj(n.validateStockInput(o))}),t.k0s()}if(2&r){const i=t.XpG();t.R50("ngModel",i.product.max_amount)}}function H(r,a){if(1&r&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.JRh(null==i.product?null:i.product.provider_name)}}function J(r,a){if(1&r&&(t.j41(0,"ion-select-option",42),t.EFF(1),t.k0s()),2&r){const i=a.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.name," ")}}function K(r,a){if(1&r){const i=t.RV6();t.j41(0,"ion-select",44),t.mxI("ngModelChange",function(o){t.eBV(i);const n=t.XpG();return t.DH7(n.product.provider_id,o)||(n.product.provider_id=o),t.Njj(o)}),t.DNE(1,J,2,2,"ion-select-option",41),t.k0s()}if(2&r){const i=t.XpG();t.R50("ngModel",i.product.provider_id),t.R7$(),t.Y8G("ngForOf",i.providers)}}function L(r,a){if(1&r){const i=t.RV6();t.j41(0,"ion-footer",45)(1,"div",46)(2,"ion-button",47),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.saveChanges())}),t.nrm(3,"ion-icon",48),t.EFF(4," Guardar "),t.k0s(),t.j41(5,"ion-button",49),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.cancelEdit())}),t.nrm(6,"ion-icon",50),t.EFF(7," Cancelar "),t.k0s()()()}}const W=[{path:"",component:(()=>{var r;class a{constructor(e,o,n,c,d,P,v,M,q,tt,et,ot,nt){this.route=e,this.inventoryService=o,this.alertController=n,this.router=c,this.http=d,this.authService=P,this.actionSheetController=v,this.modalController=M,this.imageState=q,this.platform=tt,this.changeDetector=et,this.loadingController=ot,this.toastController=nt,this.providers=[],this.isEditMode=!1,this.esGerente=!1,this.imageUrl=null,this.subCategories=[],this.subCategoryName="",this.isUpdating=!1}ngOnInit(){const e=this.authService.getUserId();e&&this.http.get(`https://muebleriasolaris.com/ionic-login/check_gerencia.php?userid=${e}`).subscribe(n=>{n.success?this.esGerente=n.isGerente:console.error("Error en la respuesta de la API:",n.error),console.log("\xbfEs gerente?",this.esGerente),console.log("ID de usuario:",e)},n=>{console.error("Error en la llamada HTTP:",n)});const o=+this.route.snapshot.paramMap.get("id");this.fetchProduct(o),this.fetchProviders(),this.loadSubCategories()}loadSubCategories(){this.inventoryService.getSubCategories().subscribe(e=>{e.success&&(this.subCategories=e.data)},e=>{console.error("Error al cargar las subcategor\xedas:",e)})}getSubCategoryName(e){if(!e)return"Sin subcategor\xeda";const o=this.subCategories.find(n=>n.id===e);return o?o.name:"Sin subcategor\xeda"}viewImage(){var e=this;return(0,u.A)(function*(){e.product.image_url?yield(yield e.modalController.create({component:C.d,componentProps:{imageUrl:e.product.image_url}})).present():yield e.showAlert("Error","No hay imagen para mostrar.")})()}uploadImage(e){var o=this;return(0,u.A)(function*(){const n=yield o.loadingController.create({message:"Subiendo imagen...",spinner:"crescent"});yield n.present();try{const c=o.product.product_id,P=yield(yield fetch(e)).blob(),v=new FormData;v.append("image",P,`product_${c}.jpg`),v.append("product_id",c.toString());const M=yield(0,f.s)(o.http.post("https://muebleriasolaris.com/ionic-products/ftp_image_upload.php",v));if("success"!==M.status)throw new Error(M.message||"Error en la respuesta del servidor");o.product.image_url=M.image_url,o.imageState.getImageUrl(c),o.product={...o.product},o.changeDetector.setChangesDetected(`product_${o.product.product_id}`,!0),yield o.showAlert("\xc9xito","Imagen actualizada correctamente.")}catch(c){console.error("Error al subir la imagen:",c),yield o.showAlert("Error","Ocurri\xf3 un error al subir la imagen.")}finally{yield n.dismiss()}})()}deleteImage(){var e=this;return(0,u.A)(function*(){const o=yield e.loadingController.create({message:"Eliminando imagen...",spinner:"dots"});yield o.present();try{const n=e.product.product_id,c=new FormData;c.append("product_id",n.toString());const d=yield(0,f.s)(e.http.post("https://muebleriasolaris.com/ionic-products/ftp_image_delete.php",c));if("success"!==d.status)throw new Error(d.message||"Error en la respuesta del servidor");e.product.image_url="assets/product_placeholder.png",e.changeDetector.setChangesDetected(`product_${e.product.product_id}`,!0),yield e.showAlert("\xc9xito","Imagen eliminada correctamente.")}catch(n){console.error("Error al eliminar la imagen:",n),yield e.showAlert("Error","Ocurri\xf3 un error al eliminar la imagen.")}finally{yield o.dismiss()}})()}changeImage(){var e=this;return(0,u.A)(function*(){try{const o=yield p.i7.getPhoto({quality:90,allowEditing:!1,resultType:p.LK.Uri,source:p.ru.Photos});o.webPath&&(yield e.uploadImage(o.webPath))}catch(o){console.error("Error al seleccionar la imagen:",o)}})()}presentImageOptions(){var e=this;return(0,u.A)(function*(){console.log("Click en Imagen"),yield(yield e.actionSheetController.create({header:"Opciones de imagen",buttons:[{text:"Cambiar imagen",icon:"image",handler:()=>{e.changeImage()}},{text:"Eliminar imagen",icon:"trash",handler:()=>{e.deleteImage()}},{text:"Ver imagen",icon:"eye-outline",handler:()=>{e.viewImage()}},{text:"Cancelar",icon:"close",role:"cancel"}]})).present()})()}fetchProduct(e){this.inventoryService.getProducts().subscribe(o=>{o.success&&(this.product=o.data.find(n=>n.product_id===e),this.originalProduct={...this.product})},o=>{console.error("Error al obtener el producto:",o)})}fetchProviders(){this.inventoryService.getProviders().subscribe(e=>{e.success&&(this.providers=e.data)},e=>{console.error("Error al obtener los proveedores:",e)})}toggleEditMode(){this.isEditMode?this.product={...this.originalProduct}:this.product.updated_at=(new Date).toLocaleString(),this.isEditMode=!this.isEditMode}confirmSaveChanges(){var e=this;return(0,u.A)(function*(){yield(yield e.alertController.create({header:"Confirmar Actualizaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas actualizar este producto?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Actualizar",handler:()=>{e.saveChanges()}}]})).present()})()}saveChanges(){var e=this;return(0,u.A)(function*(){if(!e.product||!e.product.product_id)return void console.error("El producto no tiene un ID v\xe1lido.");const o=yield e.loadingController.create({message:"Guardando cambios...",spinner:"bubbles"});yield o.present();try{e.product.name=e.product.name,e.product.credit_price=parseFloat(e.product.credit_price),e.product.prov_price=parseFloat(e.product.prov_price),e.product.current_stock=parseInt(e.product.current_stock,10),e.product.max_amount=parseInt(e.product.max_amount,10),console.log("Datos enviados al backend:",e.product);const n=yield(0,f.s)(e.inventoryService.saveProduct(e.product));if(!n.success)throw new Error(n.message||"Error al actualizar el producto");yield e.showAlert("\xc9xito","Producto actualizado correctamente."),e.originalProduct={...e.product},e.isEditMode=!1,e.changeDetector.setChangesDetected(`product_${e.product.product_id}`,!0),window.location.reload()}catch(n){console.error("Error al actualizar el producto:",n),yield e.showAlert("Error",n.message||"Ocurri\xf3 un error al actualizar el producto.")}finally{yield o.dismiss()}})()}confirmDelete(){var e=this;return(0,u.A)(function*(){e.deleteProduct()})()}deleteProduct(){var e=this;return(0,u.A)(function*(){if(!e.product||!e.product.product_id)return console.error("El producto no tiene un ID v\xe1lido."),void(yield e.showAlert("Error","El producto no tiene un ID v\xe1lido."));var n;yield(yield e.alertController.create({header:"Confirmar eliminaci\xf3n",message:`\xbfEst\xe1s seguro de que deseas eliminar "${e.product.product_name}" (ID: ${e.product.product_id})?`,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:(n=(0,u.A)(function*(){const c=yield e.loadingController.create({message:"Eliminando producto...",spinner:"lines",duration:15e3});try{yield c.present();const d=yield e.inventoryService.deleteProduct(e.product.product_id).toPromise();if(null==d||!d.success)throw new Error((null==d?void 0:d.message)||"No se pudo eliminar el producto");yield e.showToast("Producto eliminado correctamente","success"),e.changeDetector.setChangesDetected(`product_${e.product.product_id}`,!0),e.goBack()}catch(d){console.error("Error al eliminar:",d);let P="Error desconocido al eliminar";d instanceof Error?P=d.message:"string"==typeof d&&(P=d),yield e.showAlert("Error",P)}finally{yield c.dismiss()}}),function(){return n.apply(this,arguments)})}]})).present()})()}showToast(e,o="danger"){var n=this;return(0,u.A)(function*(){yield(yield n.toastController.create({message:e,duration:3e3,color:o,position:"top"})).present()})()}showAlert(e,o,n=3e3){var c=this;return(0,u.A)(function*(){const d=yield c.alertController.create({header:e,message:o,buttons:["OK"]});yield d.present(),setTimeout(()=>{d.dismiss()},n)})()}cancelEdit(){console.log("Cancelando edici\xf3n"),this.product={...this.originalProduct},this.isEditMode=!1}goBack(){var e=this;return(0,u.A)(function*(){try{var o;const n=null===(o=e.product)||void 0===o?void 0:o.product_id,c=!!n&&e.changeDetector.hasChanges(`product_${n}`);console.log(`Navegando a inventario. Cambios: ${c}`),yield e.router.navigate(["/inventario"],{replaceUrl:!0,state:{forceRefresh:c}}),c&&(console.log("Forzando recarga..."),setTimeout(()=>{window.location.href="/inventario"},200)),n&&e.changeDetector.reset(`product_${n}`)}catch(n){console.error("Error en goBack:",n),window.location.href="/inventario"}})()}toggleProductVisibility(){var e=this;return(0,u.A)(function*(){if(e.isUpdating||!e.product)return;void 0===e.product.hide_product&&(e.product.hide_product=0),e.isUpdating=!0;const o=e.product.hide_product;e.product.hide_product=0===e.product.hide_product?1:0;try{const n=yield(0,f.s)(e.inventoryService.updateProductVisibility(e.product.product_id,e.product.hide_product));console.log("Respuesta del servidor:",n),yield e.showToast("Producto marcado como "+(0===e.product.hide_product?"visible":"oculto"),"success")}catch(n){e.product.hide_product=o,console.error("Error completo:",n),yield e.showToast("Error al actualizar visibilidad","danger")}finally{e.isUpdating=!1}})()}validateStockInput(e){let o=e.target.value;o=o.replace(/[^0-9]/g,""),o.length>5&&(o=o.slice(0,5)),e.target.value=o,this.product.current_stock=o}validateCreditPriceInput(e){var o;let n=e.target.value;n=n.replace(/[^0-9.]/g,"");const c=n.split(".");c.length>2&&(n=c[0]+"."+c[1]),(null===(o=c[1])||void 0===o?void 0:o.length)>2&&(n=c[0]+"."+c[1].substring(0,2)),e.target.value=n,this.product.credit_price=n}validateProvPriceInput(e){var o;let n=e.target.value;n=n.replace(/[^0-9.]/g,"");const c=n.split(".");c.length>2&&(n=c[0]+"."+c[1]),(null===(o=c[1])||void 0===o?void 0:o.length)>2&&(n=c[0]+"."+c[1].substring(0,2)),e.target.value=n,this.product.prov_price=n}}return(r=a).\u0275fac=function(e){return new(e||r)(t.rXU(g.nX),t.rXU(y.c),t.rXU(l.hG),t.rXU(g.Ix),t.rXU(I.Qq),t.rXU(k.u),t.rXU(l.GD),t.rXU(l.W3),t.rXU(j.S),t.rXU(E.OD),t.rXU(G),t.rXU(l.Xi),t.rXU(l.K_))},r.\u0275cmp=t.VBU({type:r,selectors:[["app-producto"]],decls:73,vars:36,consts:[[1,"profile-header"],[1,"profile-avatar",3,"click"],["alt","Imagen del Producto",3,"src"],["class","visibility-control",3,"click",4,"ngIf"],[1,"top-button-container"],["color","light",1,"regresar-button",3,"click"],["name","arrow-back-outline","slot","start"],["color","secondary",3,"click"],["name","create-outline","slot","start"],["color","danger",3,"click"],["name","trash-outline","slot","start"],[1,"account-info"],[1,"top-cliente"],["lines","none"],[4,"ngIf"],["name","cash-outline","slot","start"],[3,"ngStyle"],["placeholder","Precio Cr\xe9dito","type","text","inputmode","decimal",3,"ngModel","ngModelChange","ionInput",4,"ngIf"],["name","pricetags-outline","slot","start"],["placeholder","Seleccionar Subcategor\xeda",3,"ngModel","ngModelChange",4,"ngIf"],["name","layers-outline","slot","start"],["placeholder","Stock","type","tel","inputmode","numeric",3,"ngModel","ngModelChange","ionInput",4,"ngIf"],["name","analytics-outline","slot","start"],["name","business-outline","slot","start"],["placeholder","Seleccionar Proveedor",3,"ngModel","ngModelChange",4,"ngIf"],["name","time-outline","slot","start"],["class","edit-footer",4,"ngIf"],[1,"visibility-control",3,"click"],[1,"toggle-container"],[1,"toggle-track"],[1,"toggle-thumb"],["name","crescent",4,"ngIf"],["name","crescent"],["name","person-outline","slot","start"],["name","name","placeholder","Nuevo Nombre","type","text","required","",3,"ngModel","ngModelChange",4,"ngIf"],["name","name","placeholder","Nuevo Nombre","type","text","required","",3,"ngModelChange","ngModel"],["placeholder","Precio Cr\xe9dito","type","text","inputmode","decimal",3,"ngModelChange","ionInput","ngModel"],["name","wallet-outline","slot","start"],["placeholder","Precio Provedor","type","text","inputmode","decimal",3,"ngModel","ngModelChange","ionInput",4,"ngIf"],["placeholder","Precio Provedor","type","text","inputmode","decimal",3,"ngModelChange","ionInput","ngModel"],["placeholder","Seleccionar Subcategor\xeda",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Stock","type","tel","inputmode","numeric",3,"ngModelChange","ionInput","ngModel"],["placeholder","Seleccionar Proveedor",3,"ngModelChange","ngModel"],[1,"edit-footer"],[1,"bottom-action-buttons"],["expand","block","color","success",1,"guardar-button",3,"click"],["slot","start","name","checkmark-outline"],["expand","block","color","danger",1,"cancelar-button",3,"click"],["slot","start","name","close-outline"]],template:function(e,o){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Detalles del Producto"),t.k0s()()(),t.j41(4,"ion-content")(5,"div",0)(6,"ion-avatar",1),t.bIt("click",function(){return o.presentImageOptions()}),t.nrm(7,"img",2),t.k0s(),t.j41(8,"h2"),t.EFF(9),t.k0s(),t.j41(10,"p"),t.EFF(11),t.k0s(),t.DNE(12,S,5,3,"div",3),t.k0s(),t.j41(13,"div",4)(14,"ion-button",5),t.bIt("click",function(){return o.goBack()}),t.nrm(15,"ion-icon",6),t.EFF(16," Regresar "),t.k0s(),t.j41(17,"ion-button",7),t.bIt("click",function(){return o.toggleEditMode()}),t.nrm(18,"ion-icon",8),t.EFF(19," Editar "),t.k0s(),t.j41(20,"ion-button",9),t.bIt("click",function(){return o.confirmDelete()}),t.nrm(21,"ion-icon",10),t.EFF(22," Eliminar "),t.k0s()(),t.j41(23,"div",11)(24,"div",12)(25,"h3"),t.EFF(26,"Detalles del Producto"),t.k0s()(),t.j41(27,"ion-list",13),t.DNE(28,F,6,4,"ion-item",14),t.j41(29,"ion-item"),t.nrm(30,"ion-icon",15),t.j41(31,"ion-label")(32,"h2",16),t.EFF(33,"Precio Cr\xe9dito"),t.k0s(),t.DNE(34,D,3,4,"p",14)(35,w,1,1,"ion-input",17),t.k0s()(),t.DNE(36,X,7,5,"ion-item",14),t.j41(37,"ion-item"),t.nrm(38,"ion-icon",18),t.j41(39,"ion-label")(40,"h2",16),t.EFF(41,"Sub Categor\xeda"),t.k0s(),t.DNE(42,N,2,1,"p",14)(43,V,2,2,"ion-select",19),t.k0s()(),t.j41(44,"ion-item"),t.nrm(45,"ion-icon",20),t.j41(46,"ion-label")(47,"h2",16),t.EFF(48,"Stock Disponible"),t.k0s(),t.DNE(49,Y,2,1,"p",14)(50,U,1,1,"ion-input",21),t.k0s()(),t.j41(51,"ion-item"),t.nrm(52,"ion-icon",22),t.j41(53,"ion-label")(54,"h2",16),t.EFF(55,"Max Stock"),t.k0s(),t.DNE(56,B,2,1,"p",14)(57,z,1,1,"ion-input",21),t.k0s()(),t.j41(58,"ion-item"),t.nrm(59,"ion-icon",23),t.j41(60,"ion-label")(61,"h2",16),t.EFF(62,"Proveedor"),t.k0s(),t.DNE(63,H,2,1,"p",14)(64,K,2,2,"ion-select",24),t.k0s()(),t.j41(65,"ion-item"),t.nrm(66,"ion-icon",25),t.j41(67,"ion-label")(68,"h2",16),t.EFF(69,"\xdaltima Actualizaci\xf3n"),t.k0s(),t.j41(70,"p"),t.EFF(71),t.k0s()()()(),t.DNE(72,L,8,0,"ion-footer",26),t.k0s()()),2&e&&(t.R7$(7),t.Y8G("src",o.imageState.getImageUrl(o.product),t.B4B),t.R7$(2),t.JRh(null==o.product?null:o.product.product_name),t.R7$(2),t.SpI("ID: ",null==o.product?null:o.product.product_id,""),t.R7$(),t.Y8G("ngIf",o.esGerente),t.R7$(16),t.Y8G("ngIf",o.isEditMode),t.R7$(4),t.Y8G("ngStyle",t.eq3(24,h,o.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!o.isEditMode),t.R7$(),t.Y8G("ngIf",o.isEditMode),t.R7$(),t.Y8G("ngIf",o.esGerente),t.R7$(4),t.Y8G("ngStyle",t.eq3(26,h,o.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!o.isEditMode),t.R7$(),t.Y8G("ngIf",o.isEditMode),t.R7$(4),t.Y8G("ngStyle",t.eq3(28,h,o.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!o.isEditMode),t.R7$(),t.Y8G("ngIf",o.isEditMode),t.R7$(4),t.Y8G("ngStyle",t.eq3(30,h,o.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!o.isEditMode),t.R7$(),t.Y8G("ngIf",o.isEditMode),t.R7$(4),t.Y8G("ngStyle",t.eq3(32,h,o.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!o.isEditMode),t.R7$(),t.Y8G("ngIf",o.isEditMode),t.R7$(4),t.Y8G("ngStyle",t.eq3(34,h,o.isEditMode?"bold":"normal")),t.R7$(3),t.JRh(null==o.product?null:o.product.updated_at),t.R7$(),t.Y8G("ngIf",o.isEditMode))},dependencies:[_.Sq,_.bT,_.B3,m.BC,m.YS,m.vS,l.mC,l.Jm,l.W9,l.M0,l.eU,l.iq,l.$w,l.uz,l.he,l.nf,l.Nm,l.Ip,l.w2,l.BC,l.ai,l.Je,l.Gw,_.QX],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.profile-header[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;background:linear-gradient(to bottom,#3880ff,#dfdfdf);color:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:800px;margin:0 auto;position:relative}.visibility-control[_ngcontent-%COMP%]{margin-top:15px;display:flex;align-items:center;justify-content:center;background:#fff3;padding:8px 15px;border-radius:20px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);cursor:pointer;transition:all .3s ease}.visibility-control[_ngcontent-%COMP%]:hover{background:#ffffff4d}.visibility-control[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.visibility-control[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]{width:50px;height:24px;background-color:var(--ion-color-success);border-radius:12px;position:relative;transition:background-color .3s ease}.visibility-control[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-track.hidden[_ngcontent-%COMP%]{background-color:var(--ion-color-medium)}.visibility-control[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]   .toggle-thumb[_ngcontent-%COMP%]{position:absolute;width:20px;height:20px;background:#fff;border-radius:50%;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 2px 4px #0003}.visibility-control[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff}.visibility-control[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:16px;height:16px;color:#fff}.visibility-control[_ngcontent-%COMP%]   .toggle-track.hidden[_ngcontent-%COMP%]   .toggle-thumb[_ngcontent-%COMP%]{transform:translate(26px)}.visibility-control[_ngcontent-%COMP%]:active   .toggle-thumb[_ngcontent-%COMP%]{width:22px}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:10px;border-radius:50%;overflow:hidden;border:3px solid white;background-color:#fff}.top-button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:20px;padding:10px 0;background:#3880ff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;max-width:800px;margin:-40px auto 0}.top-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:auto;font-size:.9rem}.regresar-button[_ngcontent-%COMP%]::part(native){background-color:#fff!important;color:#2f4f4f}.account-info[_ngcontent-%COMP%]{padding:30px;margin:30px auto;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0000001a;max-width:700px;text-align:left}ion-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:5px}ion-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:#666}.bottom-action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 0 0;margin:0 auto;max-width:700px}.bottom-action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 10px;font-weight:700;color:#fff;--border-radius: 8px;--padding: 10px 0}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.cancelar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #dc3545, #c82333)}@media (min-width: 768px){.profile-header[_ngcontent-%COMP%], .account-info[_ngcontent-%COMP%], .top-button-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.top-button-container[_ngcontent-%COMP%]{margin-top:-40px}}.edit-footer[_ngcontent-%COMP%]{box-shadow:none;margin-top:20px}.bottom-action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;max-width:700px;margin:0 auto;padding:0 10px}.bottom-action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;min-height:50px;margin:0;--border-radius: 8px;font-weight:700}.guardar-button[_ngcontent-%COMP%]{--background: linear-gradient(to right, #28a745, #218838);--background-activated: #218838}.cancelar-button[_ngcontent-%COMP%]{--background: linear-gradient(to right, #dc3545, #c82333);--background-activated: #c82333}ion-content[_ngcontent-%COMP%]{--padding-bottom: 80px}@media (max-width: 480px){.bottom-action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.bottom-action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}ion-content[_ngcontent-%COMP%]{--padding-bottom: 120px}}']}),a})()}];let Q=(()=>{var r;class a{}return(r=a).\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.$C({type:r}),r.\u0275inj=t.G2t({imports:[g.iI.forChild(W),g.iI]}),a})(),Z=(()=>{var r;class a{}return(r=a).\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.$C({type:r}),r.\u0275inj=t.G2t({imports:[_.MD,m.YN,l.bv,Q]}),a})()},4191:(x,b,s)=>{s.d(b,{S:()=>m});var _=s(4438);let m=(()=>{var l;class g{constructor(){}getImageUrl(p){return null!=p&&p.image_url?`${p.image_url}?t=${Date.now()}`:"assets/product_placeholder.png"}}return(l=g).\u0275fac=function(p){return new(p||l)},l.\u0275prov=_.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),g})()},3207:(x,b,s)=>{s.d(b,{s:()=>m});var _=s(9350);function m(l,g){const u="object"==typeof g;return new Promise((p,C)=>{let t,f=!1;l.subscribe({next:y=>{t=y,f=!0},error:C,complete:()=>{f?p(t):u?p(g.defaultValue):C(new _.G)}})})}}}]);