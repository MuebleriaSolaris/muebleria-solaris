"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2672],{2672:(P,f,s)=>{s.r(f),s.d(f,{SubCategoriasInfoPageModule:()=>x});var u=s(177),g=s(4341),r=s(7125),l=s(5520),d=s(467),t=s(4438),p=s(4934);const b=o=>({"font-weight":o});function h(o,i){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(null==a.subcategory?null:a.subcategory.name)}}function y(o,i){if(1&o){const a=t.RV6();t.j41(0,"ion-input",22),t.mxI("ngModelChange",function(e){t.eBV(a);const c=t.XpG();return t.DH7(c.subcategory.name,e)||(c.subcategory.name=e),t.Njj(e)}),t.k0s()}if(2&o){const a=t.XpG();t.R50("ngModel",a.subcategory.name)}}function C(o,i){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(a.formatDate(null==a.subcategory?null:a.subcategory.created_at))}}function _(o,i){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(a.formatDate(null==a.subcategory?null:a.subcategory.updated_at))}}function E(o,i){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.SpI("(ID: ",a.subcategory.category_id,")")}}function I(o,i){if(1&o){const a=t.RV6();t.j41(0,"ion-footer",23)(1,"div",24)(2,"ion-button",25),t.bIt("click",function(){t.eBV(a);const e=t.XpG();return t.Njj(e.saveChanges())}),t.nrm(3,"ion-icon",26),t.EFF(4," Guardar "),t.k0s(),t.j41(5,"ion-button",27),t.bIt("click",function(){t.eBV(a);const e=t.XpG();return t.Njj(e.cancelEdit())}),t.nrm(6,"ion-icon",28),t.EFF(7," Cancelar "),t.k0s()()()}}const M=[{path:"",component:(()=>{var o;class i{constructor(n,e,c,m){this.route=n,this.router=e,this.inventoryService=c,this.alertController=m,this.subcategory={},this.isEditMode=!1}ngOnInit(){this.subcategoryId=this.route.snapshot.paramMap.get("id")||"",this.subcategoryId?this.loadSubcategoryInfo(this.subcategoryId):console.warn("No se recibi\xf3 ning\xfan ID en la URL.")}loadSubcategoryInfo(n){this.inventoryService.getSubcategoryById(n).subscribe({next:e=>{e.success?(this.subcategory=e.data,this.loadCategoryName(this.subcategory.category_id||14)):(console.warn("No se encontr\xf3 la subcategor\xeda con el ID:",n),this.showAlert("Error","Subcategor\xeda no encontrada"))},error:e=>{console.error("Error al cargar la subcategor\xeda:",e),this.showAlert("Error","Ocurri\xf3 un error al cargar la subcategor\xeda")}})}loadCategoryName(n){this.inventoryService.getCategoryName(n).subscribe({next:e=>{this.categoryName=e.success?e.data.name:"Categor\xeda General"},error:()=>{this.categoryName="Categor\xeda General"}})}formatDate(n){return n?new Date(n).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}toggleEditMode(){this.isEditMode=!this.isEditMode}confirmSaveChanges(){var n=this;return(0,d.A)(function*(){yield(yield n.alertController.create({header:"Confirmar Actualizaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas actualizar esta subcategor\xeda?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Actualizar",handler:()=>{n.saveChanges()}}]})).present()})()}saveChanges(){this.inventoryService.updateSubcategory({id:this.subcategory.id,name:this.subcategory.name,category_id:this.subcategory.category_id||14}).subscribe({next:e=>{e.success?(this.showAlert("\xc9xito","Subcategor\xeda actualizada correctamente"),this.subcategory.updated_at=e.updated_at,this.isEditMode=!1):this.showAlert("Error",e.message)},error:e=>{console.error("Error al actualizar la subcategor\xeda:",e),this.showAlert("Error","Ocurri\xf3 un error al actualizar la subcategor\xeda")}})}confirmDelete(){var n=this;return(0,d.A)(function*(){yield(yield n.alertController.create({header:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar esta subcategor\xeda?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",handler:()=>{n.deleteSubcategory()}}]})).present()})()}deleteSubcategory(){this.inventoryService.deleteSubcategory(this.subcategory.id).subscribe({next:n=>{n.success?(this.showAlert("\xc9xito","Subcategor\xeda eliminada correctamente"),this.router.navigate(["/categorias"])):this.showAlert("Error","Error al eliminar la subcategor\xeda: "+n.message)},error:n=>{console.error("Error al eliminar la subcategor\xeda:",n),this.showAlert("Error","Ocurri\xf3 un error al eliminar la subcategor\xeda")}})}showAlert(n,e){var c=this;return(0,d.A)(function*(){yield(yield c.alertController.create({header:n,message:e,buttons:["OK"]})).present()})()}cancelEdit(){this.isEditMode=!1,this.loadSubcategoryInfo(this.subcategory.id)}goBack(){this.router.navigate(["/categorias"])}}return(o=i).\u0275fac=function(n){return new(n||o)(t.rXU(l.nX),t.rXU(l.Ix),t.rXU(p.c),t.rXU(r.hG))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-sub-categorias-info"]],decls:55,vars:18,consts:[["color","primary"],[1,"profile-header"],[1,"profile-avatar"],["src","assets/sub_categories.png","alt","Subcategor\xeda"],[1,"top-button-container"],["color","light",1,"regresar-button",3,"click"],["name","arrow-back-outline","slot","start"],["color","secondary",3,"click"],["name","create-outline","slot","start"],["color","danger",3,"click"],["name","trash-outline","slot","start"],[1,"account-info"],[1,"top-cliente"],["lines","none"],["name","pricetags-outline","slot","start"],[3,"ngStyle"],[4,"ngIf"],["placeholder","Nombre de la Subcategor\xeda",3,"ngModel","ngModelChange",4,"ngIf"],["name","time-outline","slot","start"],["name","refresh-outline","slot","start"],["name","layers-outline","slot","start"],["class","edit-footer",4,"ngIf"],["placeholder","Nombre de la Subcategor\xeda",3,"ngModelChange","ngModel"],[1,"edit-footer"],[1,"bottom-action-buttons"],["expand","block","color","success",1,"guardar-button",3,"click"],["slot","start","name","checkmark-outline"],["expand","block","color","danger",1,"cancelar-button",3,"click"],["slot","start","name","close-outline"]],template:function(n,e){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t.EFF(3,"Informaci\xf3n de Subcategor\xeda"),t.k0s()()(),t.j41(4,"ion-content")(5,"div",1)(6,"ion-avatar",2),t.nrm(7,"img",3),t.k0s(),t.j41(8,"h2"),t.EFF(9),t.k0s(),t.j41(10,"p"),t.EFF(11),t.k0s()(),t.j41(12,"div",4)(13,"ion-button",5),t.bIt("click",function(){return e.goBack()}),t.nrm(14,"ion-icon",6),t.EFF(15," Regresar "),t.k0s(),t.j41(16,"ion-button",7),t.bIt("click",function(){return e.toggleEditMode()}),t.nrm(17,"ion-icon",8),t.EFF(18," Editar "),t.k0s(),t.j41(19,"ion-button",9),t.bIt("click",function(){return e.confirmDelete()}),t.nrm(20,"ion-icon",10),t.EFF(21," Eliminar "),t.k0s()(),t.j41(22,"div",11)(23,"div",12)(24,"h3"),t.EFF(25,"Detalles de la Subcategor\xeda"),t.k0s()(),t.j41(26,"ion-list",13)(27,"ion-item"),t.nrm(28,"ion-icon",14),t.j41(29,"ion-label")(30,"h2",15),t.EFF(31,"Nombre"),t.k0s(),t.DNE(32,h,2,1,"p",16)(33,y,1,1,"ion-input",17),t.k0s()(),t.j41(34,"ion-item"),t.nrm(35,"ion-icon",18),t.j41(36,"ion-label")(37,"h2",15),t.EFF(38,"Fecha de Creaci\xf3n"),t.k0s(),t.DNE(39,C,2,1,"p",16),t.k0s()(),t.j41(40,"ion-item"),t.nrm(41,"ion-icon",19),t.j41(42,"ion-label")(43,"h2",15),t.EFF(44,"\xdaltima Actualizaci\xf3n"),t.k0s(),t.DNE(45,_,2,1,"p",16),t.k0s()(),t.j41(46,"ion-item"),t.nrm(47,"ion-icon",20),t.j41(48,"ion-label")(49,"h2"),t.EFF(50,"Categor\xeda Padre"),t.k0s(),t.j41(51,"p"),t.EFF(52),t.DNE(53,E,2,1,"span",16),t.k0s()()()(),t.DNE(54,I,8,0,"ion-footer",21),t.k0s()()),2&n&&(t.R7$(9),t.JRh(null==e.subcategory?null:e.subcategory.name),t.R7$(2),t.SpI("ID: ",null==e.subcategory?null:e.subcategory.id,""),t.R7$(19),t.Y8G("ngStyle",t.eq3(12,b,e.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!e.isEditMode),t.R7$(),t.Y8G("ngIf",e.isEditMode),t.R7$(4),t.Y8G("ngStyle",t.eq3(14,b,e.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!e.isEditMode),t.R7$(4),t.Y8G("ngStyle",t.eq3(16,b,e.isEditMode?"bold":"normal")),t.R7$(2),t.Y8G("ngIf",!e.isEditMode),t.R7$(7),t.SpI("",e.categoryName," "),t.R7$(),t.Y8G("ngIf",null==e.subcategory?null:e.subcategory.category_id),t.R7$(),t.Y8G("ngIf",e.isEditMode))},dependencies:[u.bT,u.B3,g.BC,g.vS,r.mC,r.Jm,r.W9,r.M0,r.eU,r.iq,r.$w,r.uz,r.he,r.nf,r.BC,r.ai,r.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.profile-header[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;background:linear-gradient(to bottom,#3880ff,#dfdfdf);color:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:800px;margin:0 auto}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:10px;border-radius:50%;overflow:hidden;border:3px solid white}.top-button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:20px;padding:10px 0;background:#3880ff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;max-width:800px;margin:-20px auto 0}.top-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:auto;font-size:.9rem}.regresar-button[_ngcontent-%COMP%]::part(native){background-color:#fff!important;color:#2f4f4f}.account-info[_ngcontent-%COMP%]{padding:30px;margin:30px auto;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0000001a;max-width:700px;text-align:left}ion-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:5px}ion-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:#666}.bottom-action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 0 0;margin:0 auto;max-width:700px}.bottom-action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 10px;font-weight:700;color:#fff;--border-radius: 8px;--padding: 10px 0}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.cancelar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #dc3545, #c82333)}@media (min-width: 768px){.profile-header[_ngcontent-%COMP%], .account-info[_ngcontent-%COMP%], .top-button-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.top-button-container[_ngcontent-%COMP%]{margin-top:-15px}}.edit-footer[_ngcontent-%COMP%]{box-shadow:none}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);margin-left:5px}"]}),i})()}];let S=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[l.iI.forChild(M),l.iI]}),i})(),x=(()=>{var o;class i{}return(o=i).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[u.MD,g.YN,r.bv,S]}),i})()}}]);