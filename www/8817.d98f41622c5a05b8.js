"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8817],{8817:(y,m,l)=>{l.r(m),l.d(m,{ClientesPageModule:()=>x});var g=l(177),d=l(4341),i=l(7125),p=l(620),u=l(1626),n=l(4438),C=l(4796);let h=(()=>{var o;class r{constructor(){}ngOnInit(){}}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=n.VBU({type:o,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"custom-footer"],[1,"footer-title"]],template:function(e,t){1&e&&(n.j41(0,"ion-footer",0)(1,"ion-toolbar")(2,"ion-title",1),n.EFF(3,"Copyright \xa9 2024 Muebleria Solaris"),n.k0s()()())},dependencies:[i.M0,i.BC,i.ai],styles:['@charset "UTF-8";.footer-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:400;text-align:center}.footer-top[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 770px){ion-footer[_ngcontent-%COMP%]{display:none}}']}),r})();function P(o,r){if(1&o){const a=n.RV6();n.j41(0,"ion-button",22),n.bIt("click",function(){n.eBV(a);const t=n.XpG();return n.Njj(t.goToAddClient())}),n.nrm(1,"ion-icon",23),n.EFF(2," Agregar Cliente "),n.k0s()}}function _(o,r){1&o&&(n.j41(0,"ion-badge",28),n.EFF(1," Actualizado "),n.k0s())}function f(o,r){if(1&o){const a=n.RV6();n.j41(0,"ion-item-options",29)(1,"ion-item-option",30),n.bIt("click",function(){n.eBV(a);const t=n.XpG().$implicit,c=n.XpG();return n.Njj(c.viewCustomerDetails(t.id))}),n.EFF(2," Ver Perfil "),n.k0s()()}}function M(o,r){if(1&o&&(n.j41(0,"ion-item-sliding")(1,"ion-item",24)(2,"ion-col",6),n.EFF(3),n.k0s(),n.j41(4,"ion-col",7),n.EFF(5),n.k0s(),n.j41(6,"ion-col",8),n.EFF(7),n.DNE(8,_,2,0,"ion-badge",25),n.k0s(),n.j41(9,"ion-col",9)(10,"span",26),n.EFF(11),n.k0s()()(),n.DNE(12,f,3,0,"ion-item-options",27),n.k0s()),2&o){const a=r.$implicit,e=n.XpG();n.R7$(3),n.JRh(null==a?null:a.name),n.R7$(2),n.JRh(a.address),n.R7$(2),n.SpI(" ",a.phone," "),n.R7$(),n.Y8G("ngIf",a.has_pending_changes),n.R7$(2),n.Y8G("ngClass",e.getCustomerTypeClass(a.type)),n.R7$(),n.SpI(" ",e.getCustomerTypeName(a.type)," "),n.R7$(),n.Y8G("ngIf",e.isAdmin)}}function O(o,r){1&o&&(n.j41(0,"div",31),n.nrm(1,"ion-spinner",32),n.k0s())}const b=[{path:"",component:(()=>{var o;class r{constructor(e,t,c){this.http=e,this.authService=t,this.router=c,this.customers=[],this.paginatedCustomers=[],this.itemsPerPage=10,this.currentPage=1,this.searchTerm="",this.isAdmin=!1,this.selectedCustomerId=null,this.totalCount=0,this.showingCount=0,this.loading=!1,this.lastPage=1}ngOnInit(){this.loadCustomers(),this.isAdmin=this.authService.isAdmin()}loadCustomers(e=1){this.loading=!0,this.currentPage=e;let t="https://muebleriasolaris.com/ionic-users/clientes.php",c=(new u.Nl).set("page",e.toString());this.searchTerm.trim()&&(t="https://muebleriasolaris.com/ionic-users/clientes_search.php",c=c.set("search",this.searchTerm.trim()).set("page",e.toString())),this.http.get(t,{params:c}).subscribe({next:s=>{this.customers=s.data||[],s.pagination?(this.totalCount=s.pagination.total,this.currentPage=s.pagination.current_page,this.itemsPerPage=s.pagination.per_page,this.lastPage=s.pagination.last_page):(this.totalCount=s.count||s.data.length,this.currentPage=e,this.lastPage=Math.ceil(this.totalCount/this.itemsPerPage)),this.loading=!1},error:s=>{console.error("Error al cargar clientes:",s),this.loading=!1}})}selectCustomer(e){this.selectedCustomerId=this.selectedCustomerId===e?null:e}onSearchInput(){this.loadCustomers(1)}paginateCustomers(){this.paginatedCustomers=this.customers.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage)}nextPage(){this.currentPage*this.itemsPerPage<this.totalCount&&this.loadCustomers(this.currentPage+1)}prevPage(){this.currentPage>1&&this.loadCustomers(this.currentPage-1)}getCustomerTypeName(e){switch(parseInt(e,10)){case 2:return"Malo";case 1:return"Regular";case 0:return"Bueno";default:return"Desconocido"}}getCustomerTypeClass(e){switch(parseInt(e,10)){case 0:return"success";case 1:return"warning";case 2:return"danger";default:return"medium"}}viewCustomerDetails(e,t){this.isAdmin?(this.selectedCustomerId=e,t&&t.close(),this.router.navigate(["/cliente-info",e])):console.warn("Access denied. Only admins can view customer details.")}goToAddClient(){this.router.navigate(["/agregar-clientes"])}getShowingRange(){return`${(this.currentPage-1)*this.itemsPerPage+1}-${Math.min(this.currentPage*this.itemsPerPage,this.totalCount)}`}formatNumber(e){return e.toLocaleString("es-MX")}}return(o=r).\u0275fac=function(e){return new(e||o)(n.rXU(u.Qq),n.rXU(C.u),n.rXU(p.Ix))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-clientes"]],decls:47,vars:18,consts:[["color","primary"],[1,"search-container"],["placeholder","Buscar por nombre, direcci\xf3n o tel\xe9fono","debounce","500",1,"search-bar",3,"ngModelChange","ionInput","ngModel"],["class","add-client-button","color","primary",3,"click",4,"ngIf"],[1,"customer-table"],[1,"header-row"],[1,"name-col"],[1,"address-col"],[1,"phone-col"],[1,"type-col"],[4,"ngFor","ngForOf"],["class","loading-overlay",4,"ngIf"],[1,"pagination-container","desktop-view"],[1,"pagination-controls"],["fill","clear",1,"pagination-button",3,"click","disabled"],["name","chevron-back-outline"],[1,"pagination-info"],[1,"results-count"],[1,"page-indicator"],["name","chevron-forward-outline"],[1,"pagination-container","mobile-view"],[1,"top-info"],["color","primary",1,"add-client-button",3,"click"],["slot","start","name","add-outline"],[1,"item-val"],["color","warning","style","margin-left: 5px;",4,"ngIf"],[1,"type-label",3,"ngClass"],["side","start",4,"ngIf"],["color","warning",2,"margin-left","5px"],["side","start"],["color","primary",3,"click"],[1,"loading-overlay"],["name","crescent",1,"loading-spinner"]],template:function(e,t){1&e&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),n.EFF(3,"Clientes"),n.k0s()()(),n.j41(4,"ion-content")(5,"div",1)(6,"ion-searchbar",2),n.mxI("ngModelChange",function(s){return n.DH7(t.searchTerm,s)||(t.searchTerm=s),s}),n.bIt("ionInput",function(){return t.onSearchInput()}),n.k0s(),n.DNE(7,P,3,0,"ion-button",3),n.k0s(),n.j41(8,"ion-grid",4)(9,"ion-row",5)(10,"ion-col",6)(11,"strong"),n.EFF(12,"Nombre"),n.k0s()(),n.j41(13,"ion-col",7)(14,"strong"),n.EFF(15,"Direcci\xf3n"),n.k0s()(),n.j41(16,"ion-col",8)(17,"strong"),n.EFF(18,"Tel\xe9fono"),n.k0s()(),n.j41(19,"ion-col",9)(20,"strong"),n.EFF(21,"Tipo"),n.k0s()()(),n.DNE(22,M,13,7,"ion-item-sliding",10),n.k0s(),n.DNE(23,O,2,0,"div",11),n.j41(24,"div",12)(25,"div",13)(26,"ion-button",14),n.bIt("click",function(){return t.prevPage()}),n.nrm(27,"ion-icon",15),n.k0s(),n.j41(28,"div",16)(29,"span",17),n.EFF(30),n.k0s(),n.j41(31,"span",18),n.EFF(32),n.k0s()(),n.j41(33,"ion-button",14),n.bIt("click",function(){return t.nextPage()}),n.nrm(34,"ion-icon",19),n.k0s()()(),n.j41(35,"div",20)(36,"div",21)(37,"span",18),n.EFF(38),n.k0s(),n.j41(39,"span",17),n.EFF(40),n.k0s()(),n.j41(41,"div",13)(42,"ion-button",14),n.bIt("click",function(){return t.prevPage()}),n.nrm(43,"ion-icon",15),n.k0s(),n.j41(44,"ion-button",14),n.bIt("click",function(){return t.nextPage()}),n.nrm(45,"ion-icon",19),n.k0s()()()(),n.nrm(46,"app-footer")),2&e&&(n.R7$(5),n.AVh("is-not-admin",t.isAdmin),n.R7$(),n.R50("ngModel",t.searchTerm),n.R7$(),n.Y8G("ngIf",t.isAdmin),n.R7$(15),n.Y8G("ngForOf",t.customers),n.R7$(),n.Y8G("ngIf",t.loading),n.R7$(3),n.Y8G("disabled",1===t.currentPage||t.loading),n.R7$(4),n.Lme("Mostrando ",t.getShowingRange()," de ",t.formatNumber(t.totalCount),""),n.R7$(2),n.Lme("P\xe1gina ",t.currentPage," de ",t.lastPage,""),n.R7$(),n.Y8G("disabled",t.currentPage>=t.lastPage||t.loading),n.R7$(5),n.Lme("P\xe1gina ",t.currentPage," de ",t.lastPage,""),n.R7$(2),n.Lme("Mostrando ",t.getShowingRange()," de ",t.formatNumber(t.totalCount),""),n.R7$(2),n.Y8G("disabled",1===t.currentPage||t.loading),n.R7$(2),n.Y8G("disabled",t.currentPage>=t.lastPage||t.loading))},dependencies:[g.YU,g.Sq,g.bT,d.BC,d.vS,i.In,i.Jm,i.hU,i.W9,i.lO,i.eU,i.iq,i.uz,i.LU,i.CE,i.A7,i.ln,i.S1,i.w2,i.BC,i.ai,i.Gw,h],styles:['@charset "UTF-8";.customer-table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border-collapse:collapse}.customer-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;align-items:stretch;width:100%}.customer-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:12px 8px;display:flex;align-items:center;min-width:0}.name-col[_ngcontent-%COMP%], .address-col[_ngcontent-%COMP%]{flex:3;text-align:left;justify-content:center;white-space:normal;word-break:break-word}.phone-col[_ngcontent-%COMP%], .type-col[_ngcontent-%COMP%]{flex:2;text-align:center;justify-content:center;white-space:normal}.header-row[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;border-bottom:2px solid #ccc}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{font-weight:700;white-space:nowrap}@media (max-width: 576px){.customer-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{flex-wrap:wrap}.customer-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:8px 4px;font-size:13px;flex:1 1 50%}.customer-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.type-col[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.phone-col[_ngcontent-%COMP%]{justify-content:flex-start;text-align:left}}.header-row[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;text-align:center;border-bottom:2px solid #ccc;padding:10px 0}.data-row[_ngcontent-%COMP%]{text-align:center;padding:10px 0}.customer-type[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.type-indicator[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;margin-right:8px;box-shadow:0 4px 8px #0000004d;transition:transform .3s ease,box-shadow .3s ease}.type-indicator[_ngcontent-%COMP%]:hover{transform:scale(1.2);box-shadow:0 6px 12px #0006}.search-bar[_ngcontent-%COMP%]{margin-top:20px}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px;flex-wrap:wrap}.pagination-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:5px}@media (max-width: 576px){.customer-table[_ngcontent-%COMP%]{width:100%;margin:0}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .data-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{font-size:14px}.pagination-controls[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;padding:0 10px}.pagination-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:5px;min-width:45%;display:block}}@media (max-width: 770px){.item-val[_ngcontent-%COMP%]{font-size:12px}}.cel-center[_ngcontent-%COMP%]{text-align:center}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;background-color:#f4f4f4}.search-bar[_ngcontent-%COMP%]{flex:1}.add-client-button[_ngcontent-%COMP%]{margin-top:20px;white-space:nowrap}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{flex-direction:column-reverse}.search-bar[_ngcontent-%COMP%]{margin-top:10px;width:100%;padding-bottom:0}.add-client-button[_ngcontent-%COMP%]{padding:0 10px;width:100%}.is-not-admin[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{padding-top:15px}.is-not-admin[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{padding-bottom:0}}.item-selected[_ngcontent-%COMP%]{background-color:#0000000d!important;transition:background-color .2s ease}.item-val[_ngcontent-%COMP%]{--background: transparent;--border-color: transparent;cursor:pointer;transition:background-color .2s ease}.item-val[_ngcontent-%COMP%]:hover{background-color:#0000001a}.customer-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;align-items:stretch}.customer-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}ion-item-sliding.active-slide[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{transform:translate(-100px)}ion-item-sliding.active-slide[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{opacity:.9}@media (max-width: 576px){ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px}ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:8px 4px;font-size:13px}ion-item-sliding[_ngcontent-%COMP%]   ion-item-options[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{width:80px;font-size:13px}}.customer-table[_ngcontent-%COMP%]{width:100%;margin:0 auto;text-align:center;border-collapse:collapse}.customer-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;text-align:center;border-bottom:2px solid #ccc;padding:10px 0}.customer-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{font-weight:700}.type-label[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;color:#fff;font-weight:700;border-radius:12px;text-align:center;min-width:60px}.type-label.success[_ngcontent-%COMP%]{background-color:#4caf50}.type-label.warning[_ngcontent-%COMP%]{background-color:#1e3a8a}.type-label.danger[_ngcontent-%COMP%]{background-color:#cb2a2a}.type-label.medium[_ngcontent-%COMP%]{background-color:#9e9e9e}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding:0 16px;flex-wrap:wrap}.results-count[_ngcontent-%COMP%]{font-size:14px;color:#666;padding:8px 0}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:8px}@media (max-width: 576px){.pagination-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.results-count[_ngcontent-%COMP%]{order:1;width:100%;text-align:center}.pagination-controls[_ngcontent-%COMP%]{width:100%;justify-content:center}}.text-left[_ngcontent-%COMP%]{text-align:left;justify-content:flex-start;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.results-count[_ngcontent-%COMP%]{font-size:14px}.results-count[_ngcontent-%COMP%]     .number{font-weight:700}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:#ffffffb3}.loading-spinner[_ngcontent-%COMP%]{width:64px;height:64px;color:var(--ion-color-primary)}.pagination-container[_ngcontent-%COMP%]{padding:.5rem;background:#f8f9fa;border-radius:8px;margin-top:1rem;justify-content:center}.pagination-button[_ngcontent-%COMP%]{--padding-start: .5rem;--padding-end: .5rem;--min-height: 36px;--min-width: 36px}.results-count[_ngcontent-%COMP%], .page-indicator[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.desktop-view[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem}.desktop-view[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex-grow:1;padding:0 40px}.mobile-view[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:.5rem}.mobile-view[_ngcontent-%COMP%]   .top-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}.mobile-view[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.mobile-view[_ngcontent-%COMP%]   .page-indicator[_ngcontent-%COMP%]{font-weight:500;color:#333}@media (max-width: 768px){.desktop-view[_ngcontent-%COMP%]{display:none}.mobile-view[_ngcontent-%COMP%]{display:flex}.pagination-button[_ngcontent-%COMP%]{--min-height: 32px;--min-width: 32px}}@media (max-width: 480px){.mobile-view[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%], .mobile-view[_ngcontent-%COMP%]   .page-indicator[_ngcontent-%COMP%]{font-size:.75rem;width:50%;text-align:center}}']}),r})()}];let w=(()=>{var o;class r{}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[p.iI.forChild(b),p.iI]}),r})(),x=(()=>{var o;class r{}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[g.MD,d.YN,i.bv,w]}),r})()}}]);