"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4757],{4757:(R,u,s)=>{s.r(u),s.d(u,{PerfilPageModule:()=>v});var d=s(177),f=s(4341),r=s(7125),a=s(620),e=s(4438),m=s(1626),g=s(4796);function h(i,l){if(1&i&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",10),e.j41(2,"ion-label")(3,"h2"),e.EFF(4,"Sucursal"),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s()()()),2&i){const t=e.XpG();e.R7$(6),e.JRh(null==t.user?null:t.user.company_name)}}function p(i,l){if(1&i&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",11),e.j41(2,"ion-label")(3,"h2"),e.EFF(4,"Direcci\xf3n"),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s()()()),2&i){const t=e.XpG();e.R7$(6),e.JRh(null==t.user?null:t.user.address)}}function P(i,l){if(1&i&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",12),e.j41(2,"ion-label")(3,"h2"),e.EFF(4,"Tel\xe9fono"),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s()()()),2&i){const t=e.XpG();e.R7$(6),e.JRh(null==t.user?null:t.user.phone)}}const F=[{path:"",component:(()=>{var i;class l{constructor(o,n,c){this.http=o,this.authService=n,this.router=c,this.user=null,this.loading=!0,this.error=null,this.userId=null}ngOnInit(){this.loadUserProfile()}loadUserProfile(){const o=this.authService.getUserId();this.userId=null!==o?parseInt(o,10):null,this.userId?this.authService.getUserProfile(this.userId).subscribe({next:n=>{this.loading=!1,"success"===n.status&&n.data?(this.user=n.data,console.log("Perfil cargado:",this.user)):this.error=n.message||"Error al cargar el perfil"},error:n=>{this.loading=!1,this.error="Error de conexi\xf3n con el servidor",console.error("Error en la solicitud:",n)}}):(this.loading=!1,this.error="ID de usuario no disponible")}navigateHome(){var o;const n=(null===(o=this.user)||void 0===o?void 0:o.role)||this.authService.getRole();"1"===n?this.router.navigate(["/dashboard"]):"4"===n?this.router.navigate(["/clientes"]):console.warn("Unrecognized role:",n)}}return(i=l).\u0275fac=function(o){return new(o||i)(e.rXU(m.Qq),e.rXU(g.u),e.rXU(a.Ix))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-perfil"]],decls:36,vars:8,consts:[[1,"profile-header"],[1,"profile-avatar"],["src","assets/admin_src.png","alt","Profile Picture"],["color","primary","expand","block",1,"button-mid",3,"click"],["name","arrow-back-outline","slot","start",2,"color","white"],[1,"account-info"],["lines","none"],["name","person-outline","slot","start"],[4,"ngIf"],["slot","start",3,"name"],["name","business-outline","slot","start"],["name","location-outline","slot","start"],["name","call-outline","slot","start"]],template:function(o,n){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Perfil"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",0)(6,"ion-avatar",1),e.nrm(7,"img",2),e.k0s(),e.j41(8,"h2"),e.EFF(9),e.k0s(),e.j41(10,"p"),e.EFF(11),e.k0s()(),e.j41(12,"ion-button",3),e.bIt("click",function(){return n.navigateHome()}),e.nrm(13,"ion-icon",4),e.EFF(14," Regresar al Inicio "),e.k0s(),e.j41(15,"div",5)(16,"h3"),e.EFF(17,"Informaci\xf3n del Perfil"),e.k0s(),e.j41(18,"ion-list",6)(19,"ion-item"),e.nrm(20,"ion-icon",7),e.j41(21,"ion-label")(22,"h2"),e.EFF(23,"Nombre Usuario"),e.k0s(),e.j41(24,"p"),e.EFF(25),e.k0s()()(),e.DNE(26,h,7,1,"ion-item",8)(27,p,7,1,"ion-item",8)(28,P,7,1,"ion-item",8),e.j41(29,"ion-item"),e.nrm(30,"ion-icon",9),e.j41(31,"ion-label")(32,"h2"),e.EFF(33,"Tipo Usuario"),e.k0s(),e.j41(34,"p"),e.EFF(35),e.k0s()()()()()()),2&o&&(e.R7$(9),e.JRh(null==n.user?null:n.user.username),e.R7$(2),e.JRh(null==n.user?null:n.user.email),e.R7$(14),e.JRh(null==n.user?null:n.user.name),e.R7$(),e.Y8G("ngIf",null==n.user?null:n.user.company_name),e.R7$(),e.Y8G("ngIf",null==n.user?null:n.user.address),e.R7$(),e.Y8G("ngIf",null==n.user?null:n.user.phone),e.R7$(2),e.Y8G("name","4"===(null==n.user?null:n.user.role)?"person-outline":"1"===(null==n.user?null:n.user.role)?"cash-outline":"help-outline"),e.R7$(5),e.JRh("1"===(null==n.user?null:n.user.role)?"Administrador":"4"===(null==n.user?null:n.user.role)?"Vendedor":"Unknown Role"))},dependencies:[d.bT,r.mC,r.Jm,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.BC,r.ai],styles:["ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.profile-header[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;background:linear-gradient(to bottom,#3880ff,#dfdfdf);color:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:10px;border-radius:50%;overflow:hidden;border:3px solid white}ion-button.button-mid[_ngcontent-%COMP%]{width:50%;max-width:250px;margin:-20px auto 0}.account-info[_ngcontent-%COMP%]{padding:20px;margin:20px auto;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0000001a;max-width:600px;text-align:left}ion-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;color:#333}ion-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:#666}@media (min-width: 768px){.profile-header[_ngcontent-%COMP%]{padding:60px 20px;max-width:800px;margin:0 auto}ion-button.button-mid[_ngcontent-%COMP%]{width:auto;max-width:200px;margin:20px auto}.account-info[_ngcontent-%COMP%]{max-width:700px;padding:30px}}"]}),l})()}];let b=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[a.iI.forChild(F),a.iI]}),l})(),v=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.MD,f.YN,r.bv,b]}),l})()}}]);