"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6068],{6068:(v,m,i)=>{i.r(m),i.d(m,{CrearUsuarioPageModule:()=>M});var c=i(177),t=i(4341),u=i(7125),g=i(620),p=i(467),e=i(4438),h=i(4020),f=i(1626),C=i(3656);const U=[{path:"",component:(()=>{var o;class l{constructor(n,r,s,a,P,b){this.clientesService=n,this.route=r,this.router=s,this.http=a,this.alertController=P,this.navCtrl=b,this.newUser={name:"",username:"",email:"",company_name:"",address:"",phone:"",role:"user",password:"",is_active:1},this.isCreating=!1,this.showPassword=!0}saveUser(){var n=this;return(0,p.A)(function*(){n.newUser.name&&n.newUser.username&&n.newUser.password?yield(yield n.alertController.create({header:"Confirmar",message:"\xbfEst\xe1s seguro de que deseas crear este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Crear",handler:()=>{n.createUser()}}]})).present():yield n.showAlert("Error","Por favor, completa todos los campos obligatorios.")})()}createUser(){this.isCreating=!0,this.clientesService.createUser(this.newUser).subscribe({next:n=>{this.isCreating=!1,"success"===n.status&&n.created?this.showAlert("\xc9xito",n.message).then(()=>{this.router.navigate(["/usuarios-sistema"]).then(()=>{window.location.reload()})}):this.showAlert("Error",n.message)},error:n=>{this.isCreating=!1,console.error("Error creating user:",n),this.showAlert("Error",n.message||"Error al comunicarse con el servidor")}})}validateEmail(n){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n)}validateNumericInput(n){const r=n.target.value.replace(/[^0-9]/g,"");n.target.value=r.slice(0,10),this.newUser.phone=r}showAlert(n,r){var s=this;return(0,p.A)(function*(){yield(yield s.alertController.create({header:n,message:r,buttons:["OK"]})).present()})()}capitalizeName(){this.newUser.name&&(this.newUser.name=this.newUser.name.toLowerCase().replace(/\b\w/g,n=>n.toUpperCase()))}togglePasswordVisibility(){this.showPassword=!this.showPassword}hasValue(n){return null!=n&&""!==n}}return(o=l).\u0275fac=function(n){return new(n||o)(e.rXU(h.T),e.rXU(g.nX),e.rXU(g.Ix),e.rXU(f.Qq),e.rXU(u.hG),e.rXU(C.q9))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-crear-usuario"]],decls:40,vars:17,consts:[["color","primary"],[1,"form-card"],[1,"custom-form",3,"submit"],[1,"form-group"],[1,"floating-label"],["name","name","required","",1,"native-input",3,"ngModelChange","input","ngModel"],["name","username","required","",1,"native-input",3,"ngModelChange","ngModel"],["name","phone","type","tel","inputmode","numeric","maxlength","10",1,"native-input",3,"ngModelChange","input","ngModel"],["name","role","required","",1,"native-select",3,"ngModelChange","ngModel"],["value","","disabled","","selected","","hidden",""],["value","1"],["value","4"],[1,"form-group","password-group"],["name","password","required","",1,"native-input",3,"ngModelChange","ngModel","type"],[1,"password-toggle-icon",3,"click","name"],[1,"form-footer"],["type","submit",1,"native-button","success-button"],["name","checkmark-outline"]],template:function(n,r){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3,"Crear Usuario"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",1)(6,"h2"),e.EFF(7,"Introduce los detalles del usuario"),e.k0s(),e.j41(8,"form",2),e.bIt("submit",function(){return r.saveUser()}),e.j41(9,"div",3)(10,"label",4),e.EFF(11,"Nombre"),e.k0s(),e.j41(12,"input",5),e.mxI("ngModelChange",function(a){return e.DH7(r.newUser.name,a)||(r.newUser.name=a),a}),e.bIt("input",function(){return r.capitalizeName()}),e.k0s()(),e.j41(13,"div",3)(14,"label",4),e.EFF(15,"Nombre de Usuario"),e.k0s(),e.j41(16,"input",6),e.mxI("ngModelChange",function(a){return e.DH7(r.newUser.username,a)||(r.newUser.username=a),a}),e.k0s()(),e.j41(17,"div",3)(18,"label",4),e.EFF(19,"Tel\xe9fono"),e.k0s(),e.j41(20,"input",7),e.mxI("ngModelChange",function(a){return e.DH7(r.newUser.phone,a)||(r.newUser.phone=a),a}),e.bIt("input",function(a){return r.validateNumericInput(a)}),e.k0s()(),e.j41(21,"div",3)(22,"label",4),e.EFF(23,"Rol"),e.k0s(),e.j41(24,"select",8),e.mxI("ngModelChange",function(a){return e.DH7(r.newUser.role,a)||(r.newUser.role=a),a}),e.j41(25,"option",9),e.EFF(26,"Seleccione un rol"),e.k0s(),e.j41(27,"option",10),e.EFF(28,"Administrador"),e.k0s(),e.j41(29,"option",11),e.EFF(30,"Vendedor"),e.k0s()()(),e.j41(31,"div",12)(32,"label",4),e.EFF(33,"Contrase\xf1a"),e.k0s(),e.j41(34,"input",13),e.mxI("ngModelChange",function(a){return e.DH7(r.newUser.password,a)||(r.newUser.password=a),a}),e.k0s(),e.j41(35,"ion-icon",14),e.bIt("click",function(){return r.togglePasswordVisibility()}),e.k0s()(),e.j41(36,"div",15)(37,"button",16),e.nrm(38,"ion-icon",17),e.EFF(39," Guardar Usuario "),e.k0s()()()()()),2&n&&(e.R7$(10),e.AVh("shrink",r.hasValue(r.newUser.name)),e.R7$(2),e.R50("ngModel",r.newUser.name),e.R7$(2),e.AVh("shrink",r.hasValue(r.newUser.username)),e.R7$(2),e.R50("ngModel",r.newUser.username),e.R7$(2),e.AVh("shrink",r.hasValue(r.newUser.phone)),e.R7$(2),e.R50("ngModel",r.newUser.phone),e.R7$(2),e.AVh("shrink",r.hasValue(r.newUser.role)),e.R7$(2),e.R50("ngModel",r.newUser.role),e.R7$(8),e.AVh("shrink",r.hasValue(r.newUser.password)),e.R7$(2),e.R50("ngModel",r.newUser.password),e.Y8G("type",r.showPassword?"text":"password"),e.R7$(),e.Y8G("name",r.showPassword?"eye-off-outline":"eye-outline"))},dependencies:[t.qT,t.xH,t.y7,t.me,t.wz,t.BC,t.cb,t.YS,t.tU,t.vS,t.cV,u.W9,u.eU,u.iq,u.BC,u.ai],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.form-container[_ngcontent-%COMP%]{max-width:500px;margin:40px auto;background:#fff;border-radius:10px;padding:30px;box-shadow:0 4px 12px #0000001a;text-align:center}h2[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:#333;margin-bottom:25px}.form-item[_ngcontent-%COMP%]{margin:12px 0;--padding-start: 10px;border-radius:8px;background:#f9f9f9;border-bottom:1px solid #cfc8c8}ion-label[_ngcontent-%COMP%]{color:#555;font-size:.9em;padding-left:5px;z-index:1}ion-select[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{padding:10px 0;background-color:#f7f5f5;z-index:-1}  .custom-input .input-wrapper{padding-left:10px}.footer[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center}ion-button[_ngcontent-%COMP%]{--background: #3880ff;color:#fff;width:80%;border-radius:8px;font-weight:700;box-shadow:0 4px 8px #0000001a}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.edit-footer[_ngcontent-%COMP%]{box-shadow:none;margin-top:20px}@media (max-width: 450px){.form-container[_ngcontent-%COMP%]{margin:0 auto}}.form-item[_ngcontent-%COMP%]{align-items:center}ion-select-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;vertical-align:middle}']}),l})()}];let w=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(U),g.iI]}),l})(),M=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.MD,t.YN,u.bv,w]}),l})()}}]);