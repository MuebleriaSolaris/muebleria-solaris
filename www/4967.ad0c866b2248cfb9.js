"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4967],{4967:(P,v,s)=>{s.r(v),s.d(v,{ProveedoresInfoPageModule:()=>E});var u=s(177),g=s(4341),a=s(7125),c=s(1671),h=s(467),e=s(4438),r=s(4934);const p=o=>({"font-weight":o});function m(o,d){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.JRh(null==i.provider?null:i.provider.created_at)}}function _(o,d){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.JRh(null==i.provider?null:i.provider.last_updated)}}function b(o,d){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.JRh(null==i.provider?null:i.provider.name)}}function I(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-input",19),e.mxI("ngModelChange",function(t){e.eBV(i);const l=e.XpG();return e.DH7(l.provider.name,t)||(l.provider.name=t),e.Njj(t)}),e.k0s()}if(2&o){const i=e.XpG();e.R50("ngModel",i.provider.name)}}function M(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-footer",20)(1,"div",21)(2,"ion-button",22),e.bIt("click",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.saveChanges())}),e.nrm(3,"ion-icon",23),e.EFF(4," Guardar "),e.k0s(),e.j41(5,"ion-button",24),e.bIt("click",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.cancelEdit())}),e.nrm(6,"ion-icon",25),e.EFF(7," Cancelar "),e.k0s()()()}}const C=[{path:"",component:(()=>{var o;class d{constructor(n,t,l,f){this.route=n,this.router=t,this.inventoryService=l,this.alertController=f,this.providerInfo={},this.isEditMode=!1}ngOnInit(){this.providerId=this.route.snapshot.paramMap.get("id")||"",console.log("ID del proveedor obtenido:",this.providerId),this.providerId?this.loadProviderInfo(this.providerId):console.warn("No se recibi\xf3 ning\xfan ID en la URL.")}loadProviderInfo(n){this.inventoryService.getProviders().subscribe({next:t=>{if(t.success){const l=t.data.find(f=>f.id===parseInt(n,10));l?(this.provider=l,console.log("Informaci\xf3n del proveedor:",this.provider)):console.warn("No se encontr\xf3 el proveedor con el ID:",n)}else console.warn("No se pudo cargar la lista de proveedores.")},error:t=>{console.error("Error al cargar la lista de proveedores:",t)}})}toggleEditMode(){this.isEditMode=!this.isEditMode}confirmSaveChanges(){var n=this;return(0,h.A)(function*(){yield(yield n.alertController.create({header:"Confirmar Actualizaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas actualizar este proveedor?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Actualizar",handler:()=>{n.saveChanges()}}]})).present()})()}saveChanges(){this.inventoryService.updateProvider({id:this.provider.id,name:this.provider.name}).subscribe({next:t=>{t.success?(this.showAlert("\xc9xito","Proveedor actualizado correctamente."),this.isEditMode=!1,window.location.href="/proveedores"):this.showAlert("Error",t.message)},error:t=>{console.error("Error al actualizar el proveedor:",t),this.showAlert("Error","Ocurri\xf3 un error al actualizar el proveedor.")}})}confirmDelete(){var n=this;return(0,h.A)(function*(){yield(yield n.alertController.create({header:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar este proveedor?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:()=>{n.deleteProvider()}}]})).present()})()}deleteProvider(){this.inventoryService.deleteProvider(this.provider.id).subscribe({next:n=>{n.success?(this.showAlert("\xc9xito","Proveedor eliminado correctamente."),this.router.navigate(["/proveedores"]).then(()=>{window.location.reload()})):this.showAlert("Error","Error al eliminar el proveedor: "+n.message)},error:n=>{console.error("Error al eliminar el proveedor:",n),this.showAlert("Error","Ocurri\xf3 un error al eliminar el proveedor.")}})}showAlert(n,t){var l=this;return(0,h.A)(function*(){yield(yield l.alertController.create({header:n,message:t,buttons:["OK"]})).present()})()}cancelEdit(){console.log("Cancelando edici\xf3n"),this.isEditMode=!1,this.loadProviderInfo(this.provider.id)}goBack(){this.router.navigate(["/proveedores"])}}return(o=d).\u0275fac=function(n){return new(n||o)(e.rXU(c.nX),e.rXU(c.Ix),e.rXU(r.c),e.rXU(a.hG))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-proveedores-info"]],decls:47,vars:16,consts:[[1,"profile-header"],[1,"profile-avatar"],["src","assets/user_src.png","alt","Proveedor"],[1,"top-button-container"],["color","light",1,"regresar-button",3,"click"],["name","arrow-back-outline","slot","start"],["color","secondary",3,"click"],["name","create-outline","slot","start"],["color","danger",3,"click"],["name","trash-outline","slot","start"],[1,"account-info"],[1,"top-cliente"],["lines","none"],["name","time-outline","slot","start"],[3,"ngStyle"],[4,"ngIf"],["name","refresh-outline","slot","start"],["placeholder","Nombre del Proveedor",3,"ngModel","ngModelChange",4,"ngIf"],["class","edit-footer",4,"ngIf"],["placeholder","Nombre del Proveedor",3,"ngModelChange","ngModel"],[1,"edit-footer"],[1,"bottom-action-buttons"],["expand","block","color","success",1,"guardar-button",3,"click"],["slot","start","name","checkmark-outline"],["expand","block","color","danger",1,"cancelar-button",3,"click"],["slot","start","name","close-outline"]],template:function(n,t){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Informaci\xf3n del Proveedor"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",0)(6,"ion-avatar",1),e.nrm(7,"img",2),e.k0s(),e.j41(8,"h2"),e.EFF(9),e.k0s(),e.j41(10,"p"),e.EFF(11),e.k0s()(),e.j41(12,"div",3)(13,"ion-button",4),e.bIt("click",function(){return t.goBack()}),e.nrm(14,"ion-icon",5),e.EFF(15," Regresar "),e.k0s(),e.j41(16,"ion-button",6),e.bIt("click",function(){return t.toggleEditMode()}),e.nrm(17,"ion-icon",7),e.EFF(18," Editar "),e.k0s(),e.j41(19,"ion-button",8),e.bIt("click",function(){return t.confirmDelete()}),e.nrm(20,"ion-icon",9),e.EFF(21," Eliminar "),e.k0s()(),e.j41(22,"div",10)(23,"div",11)(24,"h3"),e.EFF(25,"Detalles del Proveedor"),e.k0s()(),e.j41(26,"ion-list",12)(27,"ion-item"),e.nrm(28,"ion-icon",13),e.j41(29,"ion-label")(30,"h2",14),e.EFF(31,"Fecha de Creaci\xf3n"),e.k0s(),e.DNE(32,m,2,1,"p",15),e.k0s()(),e.j41(33,"ion-item"),e.nrm(34,"ion-icon",16),e.j41(35,"ion-label")(36,"h2",14),e.EFF(37,"\xdaltima Actualizaci\xf3n"),e.k0s(),e.DNE(38,_,2,1,"p",15),e.k0s()(),e.j41(39,"ion-item"),e.nrm(40,"ion-icon",7),e.j41(41,"ion-label")(42,"h2",14),e.EFF(43,"Nombre"),e.k0s(),e.DNE(44,b,2,1,"p",15)(45,I,1,1,"ion-input",17),e.k0s()()(),e.DNE(46,M,8,0,"ion-footer",18),e.k0s()()),2&n&&(e.R7$(9),e.JRh(null==t.provider?null:t.provider.name),e.R7$(2),e.SpI("ID: ",null==t.provider?null:t.provider.id,""),e.R7$(19),e.Y8G("ngStyle",e.eq3(10,p,t.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!t.isEditMode),e.R7$(4),e.Y8G("ngStyle",e.eq3(12,p,t.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!t.isEditMode),e.R7$(4),e.Y8G("ngStyle",e.eq3(14,p,t.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!t.isEditMode),e.R7$(),e.Y8G("ngIf",t.isEditMode),e.R7$(),e.Y8G("ngIf",t.isEditMode))},dependencies:[u.bT,u.B3,g.BC,g.vS,a.mC,a.Jm,a.W9,a.M0,a.eU,a.iq,a.$w,a.uz,a.he,a.nf,a.BC,a.ai,a.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.profile-header[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;background:linear-gradient(to bottom,#3880ff,#dfdfdf);color:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:800px;margin:0 auto}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:10px;border-radius:50%;overflow:hidden;border:3px solid white}.top-button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:20px;padding:10px 0;background:#3880ff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;max-width:800px;margin:-20px auto 0}.top-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:auto;font-size:.9rem}.regresar-button[_ngcontent-%COMP%]::part(native){background-color:#fff!important;color:#2f4f4f}.account-info[_ngcontent-%COMP%]{padding:30px;margin:30px auto;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0000001a;max-width:700px;text-align:left}ion-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:5px}ion-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:#666}.bottom-action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 0 0;margin:0 auto;max-width:700px}.bottom-action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 10px;font-weight:700;color:#fff;--border-radius: 8px;--padding: 10px 0}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.cancelar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #dc3545, #c82333)}@media (min-width: 768px){.profile-header[_ngcontent-%COMP%], .account-info[_ngcontent-%COMP%], .top-button-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.top-button-container[_ngcontent-%COMP%]{margin-top:-15px}}.ver-historial[_ngcontent-%COMP%]::part(native){--background-color: linear-gradient(to right, #3880ff, #8fb1ee);padding:8px;color:#fff}.edit-footer[_ngcontent-%COMP%]{box-shadow:none}"]}),d})()}];let x=(()=>{var o;class d{}return(o=d).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.iI.forChild(C),c.iI]}),d})(),E=(()=>{var o;class d{}return(o=d).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.MD,g.YN,a.bv,x]}),d})()},4934:(P,v,s)=>{s.d(v,{c:()=>a});var u=s(4438),g=s(1626);let a=(()=>{var c;class h{constructor(r){this.http=r,this.apiUrl="https://muebleriasolaris.com/ionic-products"}getProducts(r=""){return encodeURIComponent(r),this.http.get(`${this.apiUrl}/inventory_info.php`)}getProductsByProvider(r){return this.http.get(`${this.apiUrl}/inventory_info_by_id.php?provider_id=${r}`)}getProviders(){return this.http.get(`${this.apiUrl}/providers.php`)}getProviderById(r){return this.http.get(`${this.apiUrl}/providers.php?id=${r}`)}saveProvider(r){return this.http.post(`${this.apiUrl}/save_provider.php`,r)}getCategories(){return this.http.get(`${this.apiUrl}/categories.php`)}getBrands(){return this.http.get(`${this.apiUrl}/brands.php`)}saveInventory(){return this.http.get(`${this.apiUrl}/save_inventory.php`)}saveBrand(r){return this.http.post(`${this.apiUrl}/save_brand.php`,r,{headers:{"Content-Type":"application/json"}})}deleteBrand(r){return this.http.post(`${this.apiUrl}/delete_brand.php`,{id:r})}getSubCategories(){return this.http.get(`${this.apiUrl}/sub_categories.php`)}saveProduct(r){return this.http.post(`${this.apiUrl}/save_product.php`,r)}addInventory(r){return this.http.post(`${this.apiUrl}/save_new_product.php`,r)}updateInventory(r,p){return this.http.post(`${this.apiUrl}/update_inventory.php`,{id_product:r,adjustment:p})}deleteProduct(r){return this.http.post(`${this.apiUrl}/delete_product.php`,{product_id:r})}deleteProvider(r){return this.http.post(`${this.apiUrl}/delete_provider.php`,{id:r})}updateProvider(r){return this.http.post(`${this.apiUrl}/update_provider.php`,r)}syncStock(r){return this.http.get(`${this.apiUrl}/inventory_info.php?product_id=${r}`)}}return(c=h).\u0275fac=function(r){return new(r||c)(u.KVO(g.Qq))},c.\u0275prov=u.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),h})()}}]);