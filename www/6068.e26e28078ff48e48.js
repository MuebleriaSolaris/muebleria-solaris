"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6068],{6068:(P,g,s)=>{s.r(g),s.d(g,{CrearUsuarioPageModule:()=>w});var p=s(177),l=s(4341),a=s(4742),c=s(1671),m=s(467),e=s(4438),h=s(1626),f=s(3656);const C=[{path:"",component:(()=>{var t;class u{constructor(r,n,i,o,M){this.route=r,this.router=n,this.http=i,this.alertController=o,this.navCtrl=M,this.newUser={name:"",username:"",email:"",company_name:"",address:"",phone:"",role:"user",password:"",is_active:1},this.showPassword=!0}saveUser(){var r=this;return(0,m.A)(function*(){r.newUser.name&&r.newUser.username&&r.newUser.password?yield(yield r.alertController.create({header:"Confirmar",message:"\xbfEst\xe1s seguro de que deseas crear este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Crear",handler:()=>{r.createUser()}}]})).present():yield r.showAlert("Error","Por favor, completa todos los campos obligatorios.")})()}createUser(){this.http.post("https://muebleriasolaris.com/ionic-users/add_user.php",this.newUser).subscribe({next:n=>{"success"===n.status?(this.showAlert("\xc9xito","Usuario creado correctamente."),this.router.navigate(["/usuarios-sistema"]).then(()=>{window.location.reload()})):this.showAlert("Error",n.message)},error:n=>{this.showAlert("Error","Hubo un problema al crear el usuario."),console.error("Error creating user:",n)}})}validateEmail(r){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)}validateNumericInput(r){const n=r.target.value.replace(/[^0-9]/g,"");r.target.value=n.slice(0,10),this.newUser.phone=n}showAlert(r,n){var i=this;return(0,m.A)(function*(){yield(yield i.alertController.create({header:r,message:n,buttons:["OK"]})).present()})()}capitalizeName(){this.newUser.name&&(this.newUser.name=this.newUser.name.toLowerCase().replace(/\b\w/g,r=>r.toUpperCase()))}togglePasswordVisibility(){this.showPassword=!this.showPassword}}return(t=u).\u0275fac=function(r){return new(r||t)(e.rXU(c.nX),e.rXU(c.Ix),e.rXU(h.Qq),e.rXU(a.hG),e.rXU(f.q9))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-crear-usuario"]],decls:41,vars:7,consts:[["color","primary"],[1,"form-container"],[3,"submit"],["lines","full"],[1,"form-item"],["position","floating"],["name","name","required","","required","",1,"custom-input",3,"ngModelChange","ionInput","ngModel"],["name","username","required","",1,"custom-input",3,"ngModelChange","ngModel"],["name","phone","type","tel","inputmode","numeric","maxlength","10",1,"custom-input",3,"ngModelChange","ionInput","ngModel"],["name","role","placeholder","Seleccione un rol","required","",3,"ngModelChange","ngModel"],["value","1"],["name","person-outline","slot","start"],["value","4"],["name","cash-outline","slot","start"],["name","password","required","",1,"custom-input",3,"ngModelChange","ngModel","type"],["slot","end",1,"password-toggle-icon",3,"click","name"],[1,"footer","edit-footer"],["expand","block","color","success","type","submit",1,"guardar-button"],["slot","start","name","checkmark-outline"]],template:function(r,n){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3,"Crear Usuario"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",1)(6,"h2"),e.EFF(7,"Introduce los detalles del usuario"),e.k0s(),e.j41(8,"form",2),e.bIt("submit",function(){return n.saveUser()}),e.j41(9,"ion-list",3)(10,"ion-item",4)(11,"ion-label",5),e.EFF(12,"Nombre"),e.k0s(),e.j41(13,"ion-input",6),e.mxI("ngModelChange",function(o){return e.DH7(n.newUser.name,o)||(n.newUser.name=o),o}),e.bIt("ionInput",function(){return n.capitalizeName()}),e.k0s()(),e.j41(14,"ion-item",4)(15,"ion-label",5),e.EFF(16,"Nombre de Usuario"),e.k0s(),e.j41(17,"ion-input",7),e.mxI("ngModelChange",function(o){return e.DH7(n.newUser.username,o)||(n.newUser.username=o),o}),e.k0s()(),e.j41(18,"ion-item",4)(19,"ion-label",5),e.EFF(20,"Tel\xe9fono"),e.k0s(),e.j41(21,"ion-input",8),e.mxI("ngModelChange",function(o){return e.DH7(n.newUser.phone,o)||(n.newUser.phone=o),o}),e.bIt("ionInput",function(o){return n.validateNumericInput(o)}),e.k0s()(),e.j41(22,"ion-item",4)(23,"ion-label",5),e.EFF(24,"Rol"),e.k0s(),e.j41(25,"ion-select",9),e.mxI("ngModelChange",function(o){return e.DH7(n.newUser.role,o)||(n.newUser.role=o),o}),e.j41(26,"ion-select-option",10),e.nrm(27,"ion-icon",11),e.EFF(28," Administrador "),e.k0s(),e.j41(29,"ion-select-option",12),e.nrm(30,"ion-icon",13),e.EFF(31," Vendedor "),e.k0s()()(),e.j41(32,"ion-item",4)(33,"ion-label",5),e.EFF(34,"Contrase\xf1a"),e.k0s(),e.j41(35,"ion-input",14),e.mxI("ngModelChange",function(o){return e.DH7(n.newUser.password,o)||(n.newUser.password=o),o}),e.k0s(),e.j41(36,"ion-icon",15),e.bIt("click",function(){return n.togglePasswordVisibility()}),e.k0s()()(),e.j41(37,"ion-footer",16)(38,"ion-button",17),e.nrm(39,"ion-icon",18),e.EFF(40," Guardar Usuario "),e.k0s()()()()()),2&r&&(e.R7$(13),e.R50("ngModel",n.newUser.name),e.R7$(4),e.R50("ngModel",n.newUser.username),e.R7$(4),e.R50("ngModel",n.newUser.phone),e.R7$(4),e.R50("ngModel",n.newUser.role),e.R7$(10),e.R50("ngModel",n.newUser.password),e.Y8G("type",n.showPassword?"text":"password"),e.R7$(),e.Y8G("name",n.showPassword?"eye-off-outline":"eye-outline"))},dependencies:[l.qT,l.BC,l.cb,l.YS,l.tU,l.vS,l.cV,a.Jm,a.W9,a.M0,a.eU,a.iq,a.$w,a.uz,a.he,a.nf,a.Nm,a.Ip,a.BC,a.ai,a.Je,a.Gw],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.form-container[_ngcontent-%COMP%]{max-width:500px;margin:40px auto;background:#fff;border-radius:10px;padding:30px;box-shadow:0 4px 12px #0000001a;text-align:center}h2[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:#333;margin-bottom:25px}.form-item[_ngcontent-%COMP%]{margin:12px 0;--padding-start: 10px;border-radius:8px;background:#f9f9f9;border-bottom:1px solid #cfc8c8}ion-label[_ngcontent-%COMP%]{color:#555;font-size:.9em;padding-left:5px;z-index:1}ion-select[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{padding:10px 0;background-color:#f7f5f5;z-index:-1}  .custom-input .input-wrapper{padding-left:10px}.footer[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center}ion-button[_ngcontent-%COMP%]{--background: #3880ff;color:#fff;width:80%;border-radius:8px;font-weight:700;box-shadow:0 4px 8px #0000001a}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.edit-footer[_ngcontent-%COMP%]{box-shadow:none;margin-top:20px}@media (max-width: 450px){.form-container[_ngcontent-%COMP%]{margin:0 auto}}.form-item[_ngcontent-%COMP%]{align-items:center}ion-select-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;vertical-align:middle}']}),u})()}];let U=(()=>{var t;class u{}return(t=u).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[c.iI.forChild(C),c.iI]}),u})(),w=(()=>{var t;class u{}return(t=u).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.MD,l.YN,a.bv,U]}),u})()}}]);