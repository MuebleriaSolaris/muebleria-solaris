"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9646],{9646:(v,h,a)=>{a.r(h),a.d(h,{ListaPedidoPageModule:()=>b});var l=a(177),u=a(4341),s=a(7125),c=a(1671),t=a(4438),P=a(4934),n=a(3656);function g(e,d){if(1&e){const o=t.RV6();t.j41(0,"div",5)(1,"p")(2,"strong"),t.EFF(3,"Costo total:"),t.k0s(),t.EFF(4),t.k0s(),t.j41(5,"ion-button",6),t.bIt("click",function(){t.eBV(o);const i=t.XpG();return t.Njj(i.goBack())}),t.EFF(6,"Regresar"),t.k0s()()}if(2&e){const o=t.XpG();t.R7$(4),t.SpI(" $",o.totalCost,"")}}function _(e,d){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s()()),2&e){const o=d.$implicit;t.R7$(2),t.JRh(o.product_name),t.R7$(2),t.JRh(o.current_stock),t.R7$(2),t.JRh(o.max_amount-o.current_stock)}}function f(e,d){if(1&e){const o=t.RV6();t.j41(0,"div",7)(1,"table")(2,"thead")(3,"tr")(4,"th"),t.EFF(5,"Producto"),t.k0s(),t.j41(6,"th"),t.EFF(7,"En Existencia"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Faltantes"),t.k0s()()(),t.j41(10,"tbody"),t.DNE(11,_,7,3,"tr",8),t.k0s()(),t.j41(12,"div",9)(13,"ion-button",10),t.bIt("click",function(){t.eBV(o);const i=t.XpG();return t.Njj(i.goBack())}),t.EFF(14,"Regresar"),t.k0s()()()}if(2&e){const o=t.XpG();t.R7$(11),t.Y8G("ngForOf",o.providerProducts)}}function C(e,d){if(1&e&&(t.j41(0,"div",13)(1,"h3"),t.EFF(2),t.k0s(),t.j41(3,"p")(4,"strong"),t.EFF(5,"En existencia:"),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"p")(8,"strong"),t.EFF(9,"Faltantes:"),t.k0s(),t.EFF(10),t.k0s()()),2&e){const o=d.$implicit;t.R7$(2),t.JRh(o.product_name),t.R7$(4),t.SpI(" ",o.current_stock,""),t.R7$(4),t.SpI(" ",o.max_amount-o.current_stock,"")}}function m(e,d){if(1&e&&(t.j41(0,"div",11),t.DNE(1,C,11,3,"div",12),t.k0s()),2&e){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.providerProducts)}}const M=[{path:"",component:(()=>{var e;class d{constructor(r,i,p){this.route=r,this.inventoryService=i,this.navCtrl=p,this.providerId=null,this.providerName="",this.providerProducts=[],this.totalCost=0,this.isLargeScreen=window.innerWidth>425}ngOnInit(){this.providerId=Number(this.route.snapshot.paramMap.get("id")),this.providerId&&this.loadProviderProducts(this.providerId)}onResize(r){this.isLargeScreen=r.target.innerWidth>425}loadProviderProducts(r){this.inventoryService.getProductsByProvider(r).subscribe({next:i=>{var p;i.success?(this.providerProducts=i.data,this.providerProducts.length>0&&(this.providerName=(null===(p=this.providerProducts[0])||void 0===p?void 0:p.provider_name)||""),console.log("Productos cargados:",this.providerProducts),console.log("Proveedor:",this.providerName),this.calculateTotalCost()):console.warn("No se pudieron cargar los productos del proveedor.")},error:i=>{console.error("Error al cargar productos del proveedor:",i)}})}calculateTotalCost(){this.totalCost=this.providerProducts.reduce((r,i)=>r+(i.max_amount-i.current_stock)*i.credit_price,0)}goBack(){this.navCtrl.back()}}return(e=d).\u0275fac=function(r){return new(r||e)(t.rXU(c.nX),t.rXU(P.c),t.rXU(n.q9))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-lista-pedido"]],hostBindings:function(r,i){1&r&&t.bIt("resize",function(F){return i.onResize(F)},!1,t.tSv)},decls:13,vars:4,consts:[["slot","start"],[1,"pedido-container"],["class","mobile-total",4,"ngIf"],["class","pedido-table",4,"ngIf"],["class","pedido-list",4,"ngIf"],[1,"mobile-total"],["expand","full",3,"click"],[1,"pedido-table"],[4,"ngFor","ngForOf"],[1,"table-total"],[3,"click"],[1,"pedido-list"],["class","pedido-card",4,"ngFor","ngForOf"],[1,"pedido-card"]],template:function(r,i){1&r&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Lista de Pedido"),t.k0s()()(),t.j41(6,"ion-content")(7,"div",1)(8,"h2"),t.EFF(9),t.k0s(),t.DNE(10,g,7,1,"div",2)(11,f,15,1,"div",3)(12,m,2,1,"div",4),t.k0s()()),2&r&&(t.R7$(9),t.SpI("Pedido para el proveedor: ",i.providerName,""),t.R7$(),t.Y8G("ngIf",!i.isLargeScreen),t.R7$(),t.Y8G("ngIf",i.isLargeScreen),t.R7$(),t.Y8G("ngIf",!i.isLargeScreen))},dependencies:[l.Sq,l.bT,s.Jm,s.QW,s.W9,s.eU,s.BC,s.ai,s.el],styles:['@charset "UTF-8";.pedido-container[_ngcontent-%COMP%]{padding:16px}.pedido-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:18px;margin-bottom:16px}.pedido-container[_ngcontent-%COMP%]   .mobile-total[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:700;color:#333;margin-bottom:16px}.pedido-container[_ngcontent-%COMP%]   .mobile-total[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:16px}.pedido-container[_ngcontent-%COMP%]   .table-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:row-reverse;align-items:center;margin-top:16px;font-size:16px;font-weight:700;color:#333}.pedido-container[_ngcontent-%COMP%]   .table-total[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:16px}.pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%], .pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;text-align:center}.pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.pedido-container[_ngcontent-%COMP%]   .pedido-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#333}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]   .pedido-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 5px #0000001a;padding:16px;font-size:14px}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]   .pedido-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:700;color:#333}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]   .pedido-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;line-height:1.4}.pedido-container[_ngcontent-%COMP%]   .pedido-list[_ngcontent-%COMP%]   .pedido-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:#555}@media (min-width: 426px){.mobile-total[_ngcontent-%COMP%], .pedido-list[_ngcontent-%COMP%]{display:none}.pedido-table[_ngcontent-%COMP%]{display:block}}@media (max-width: 425px){.pedido-table[_ngcontent-%COMP%]{display:none}.pedido-list[_ngcontent-%COMP%]{display:flex}}']}),d})()}];let O=(()=>{var e;class d{}return(e=d).\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[c.iI.forChild(M),c.iI]}),d})(),b=(()=>{var e;class d{}return(e=d).\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[l.MD,u.YN,s.bv,O]}),d})()},4934:(v,h,a)=>{a.d(h,{c:()=>s});var l=a(4438),u=a(1626);let s=(()=>{var c;class t{constructor(n){this.http=n,this.apiUrl="https://muebleriasolaris.com/ionic-products"}getProducts(n=""){return encodeURIComponent(n),this.http.get(`${this.apiUrl}/inventory_info.php`)}getProductsByProvider(n){return this.http.get(`${this.apiUrl}/inventory_info_by_id.php?provider_id=${n}`)}getProviders(){return this.http.get(`${this.apiUrl}/providers.php`)}getProviderById(n){return this.http.get(`${this.apiUrl}/providers.php?id=${n}`)}saveProvider(n){return this.http.post(`${this.apiUrl}/save_provider.php`,n)}getCategories(){return this.http.get(`${this.apiUrl}/categories.php`)}getBrands(){return this.http.get(`${this.apiUrl}/brands.php`)}saveInventory(){return this.http.get(`${this.apiUrl}/save_inventory.php`)}saveBrand(n){return this.http.post(`${this.apiUrl}/save_brand.php`,n,{headers:{"Content-Type":"application/json"}})}deleteBrand(n){return this.http.post(`${this.apiUrl}/delete_brand.php`,{id:n})}getSubCategories(){return this.http.get(`${this.apiUrl}/sub_categories.php`)}saveProduct(n){return this.http.post(`${this.apiUrl}/save_product.php`,n)}addInventory(n){return this.http.post(`${this.apiUrl}/save_new_product.php`,n)}updateInventory(n,g){return this.http.post(`${this.apiUrl}/update_inventory.php`,{id_product:n,adjustment:g})}deleteProduct(n){return this.http.post(`${this.apiUrl}/delete_product.php`,{product_id:n})}deleteProvider(n){return this.http.post(`${this.apiUrl}/delete_provider.php`,{id:n})}updateProvider(n){return this.http.post(`${this.apiUrl}/update_provider.php`,n)}syncStock(n){return this.http.get(`${this.apiUrl}/inventory_info.php?product_id=${n}`)}}return(c=t).\u0275fac=function(n){return new(n||c)(l.KVO(u.Qq))},c.\u0275prov=l.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),t})()}}]);