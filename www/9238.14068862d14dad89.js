"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9238],{9238:(v,h,s)=>{s.r(h),s.d(h,{AgregarClientesPageModule:()=>_});var M=s(177),g=s(4341),i=s(4742),p=s(1671),d=s(467),e=s(4438),b=s(1626);let w=(()=>{var o;class l{constructor(n){this.http=n,this.apiUrl="https://muebleriasolaris.com/ionic-users"}addClient(n){return this.http.post(`${this.apiUrl}/add_cliente.php`,n)}}return(o=l).\u0275fac=function(n){return new(n||o)(e.KVO(b.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),l})();const P=[{path:"",component:(()=>{var o;class l{constructor(n,t,a,r,m){this.clientesService=n,this.router=t,this.alertController=a,this.toastController=r,this.location=m,this.newClient={name:"",address:"",phone:"",type:0}}capitalizeName(){this.newClient.name&&(this.newClient.name=this.newClient.name.toLowerCase().replace(/\b\w/g,n=>n.toUpperCase()))}saveClient(){var n=this;return(0,d.A)(function*(){const{name:t,address:a,phone:r,type:m}=n.newClient;var C;t&&a&&r&&0!==m?n.clientesService.addClient(n.newClient).subscribe({next:(C=(0,d.A)(function*(c){"success"===c.status?(n.toastController.create({message:"Cliente guardado exitosamente.",duration:4e3,color:"success"}).then(f=>f.present()),console.log(c.message),n.resetForm(),setTimeout(()=>{n.location.go("/clientes"),window.location.reload()},2e3)):(yield n.showAlert("Error",c.message),console.error(c.message))}),function(f){return C.apply(this,arguments)}),error:function(){var C=(0,d.A)(function*(c){yield n.showAlert("Error","Hubo un problema al guardar el cliente. Int\xe9ntalo m\xe1s tarde."),console.error("Error saving client:",c)});return function(f){return C.apply(this,arguments)}}()}):yield n.showAlert("Campos incompletos","Por favor, llena todos los campos antes de guardar.")})()}showAlert(n,t){var a=this;return(0,d.A)(function*(){yield(yield a.alertController.create({header:n,message:t,buttons:["OK"]})).present()})()}resetForm(){this.newClient={name:"",address:"",phone:"",type:0}}validateNumericInput(n){let t=n.target.value;t=t.replace(/[^0-9]/g,""),t.length>10&&(t=t.slice(0,10)),n.target.value=t,this.newClient.phone=t}}return(o=l).\u0275fac=function(n){return new(n||o)(e.rXU(w),e.rXU(p.Ix),e.rXU(i.hG),e.rXU(i.K_),e.rXU(M.aZ))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agregar-clientes"]],decls:36,vars:4,consts:[["color","primary"],[1,"form-container"],[3,"submit"],["lines","full"],[1,"form-item"],["position","floating"],["name","name","required","",1,"custom-input",3,"ngModelChange","ionInput","ngModel"],["name","address","required","",1,"custom-input",3,"ngModelChange","ngModel"],["name","phone","type","tel","inputmode","numeric","maxlength","10","required","",1,"custom-input",3,"ngModelChange","ionInput","ngModel"],["name","type","placeholder","Seleccione uno","required","",3,"ngModelChange","ngModel"],["value","0"],["value","1"],["value","2"],[1,"footer","edit-footer"],["expand","block","color","success","type","submit",1,"guardar-button"],["slot","start","name","checkmark-outline"]],template:function(n,t){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3,"Agregar Cliente"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",1)(6,"h2"),e.EFF(7,"Introduce los detalles del cliente"),e.k0s(),e.j41(8,"form",2),e.bIt("submit",function(){return t.saveClient()}),e.j41(9,"ion-list",3)(10,"ion-item",4)(11,"ion-label",5),e.EFF(12,"Nombre Completo"),e.k0s(),e.j41(13,"ion-input",6),e.mxI("ngModelChange",function(r){return e.DH7(t.newClient.name,r)||(t.newClient.name=r),r}),e.bIt("ionInput",function(){return t.capitalizeName()}),e.k0s()(),e.j41(14,"ion-item",4)(15,"ion-label",5),e.EFF(16,"Direcci\xf3n"),e.k0s(),e.j41(17,"ion-input",7),e.mxI("ngModelChange",function(r){return e.DH7(t.newClient.address,r)||(t.newClient.address=r),r}),e.k0s()(),e.j41(18,"ion-item",4)(19,"ion-label",5),e.EFF(20,"Tel\xe9fono"),e.k0s(),e.j41(21,"ion-input",8),e.mxI("ngModelChange",function(r){return e.DH7(t.newClient.phone,r)||(t.newClient.phone=r),r}),e.bIt("ionInput",function(r){return t.validateNumericInput(r)}),e.k0s()(),e.j41(22,"ion-item",4)(23,"ion-label",5),e.EFF(24,"Tipo de Cliente"),e.k0s(),e.j41(25,"ion-select",9),e.mxI("ngModelChange",function(r){return e.DH7(t.newClient.type,r)||(t.newClient.type=r),r}),e.j41(26,"ion-select-option",10),e.EFF(27,"Bueno"),e.k0s(),e.j41(28,"ion-select-option",11),e.EFF(29,"Regular"),e.k0s(),e.j41(30,"ion-select-option",12),e.EFF(31,"Malo"),e.k0s()()()(),e.j41(32,"ion-footer",13)(33,"ion-button",14),e.nrm(34,"ion-icon",15),e.EFF(35," Guardar Cliente "),e.k0s()()()()()),2&n&&(e.R7$(13),e.R50("ngModel",t.newClient.name),e.R7$(4),e.R50("ngModel",t.newClient.address),e.R7$(4),e.R50("ngModel",t.newClient.phone),e.R7$(4),e.R50("ngModel",t.newClient.type))},dependencies:[g.qT,g.BC,g.cb,g.YS,g.tU,g.vS,g.cV,i.Jm,i.W9,i.M0,i.eU,i.iq,i.$w,i.uz,i.he,i.nf,i.Nm,i.Ip,i.BC,i.ai,i.Je,i.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.form-container[_ngcontent-%COMP%]{max-width:500px;margin:40px auto;background:#fff;border-radius:10px;padding:30px;box-shadow:0 4px 12px #0000001a;text-align:center}h2[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:#333;margin-bottom:25px}.form-item[_ngcontent-%COMP%]{margin:12px 0;--padding-start: 10px;border-radius:8px;background:#f9f9f9;border-bottom:1px solid #cfc8c8}ion-label[_ngcontent-%COMP%]{color:#555;font-size:.9em;padding-left:5px;z-index:1}ion-select[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{padding:10px 0;background-color:#f7f5f5;z-index:-1}  .custom-input .input-wrapper{padding-left:10px}.footer[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center}ion-button[_ngcontent-%COMP%]{--background: #3880ff;color:#fff;width:80%;border-radius:8px;font-weight:700;box-shadow:0 4px 8px #0000001a}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.edit-footer[_ngcontent-%COMP%]{box-shadow:none;margin-top:20px}@media (max-width: 450px){.form-container[_ngcontent-%COMP%]{margin:0 auto}}"]}),l})()}];let A=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.iI.forChild(P),p.iI]}),l})(),_=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[M.MD,g.YN,i.bv,A]}),l})()}}]);