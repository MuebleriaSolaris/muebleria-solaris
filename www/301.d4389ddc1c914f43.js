"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[301],{301:(E,d,l)=>{l.r(d),l.d(d,{ClienteInfoPageModule:()=>M});var f=l(177),c=l(4341),r=l(4742),u=l(1671),e=l(4438),m=l(1626);const g=i=>({"font-weight":i});function p(i,a){if(1&i){const n=e.RV6();e.j41(0,"ion-item"),e.nrm(1,"ion-icon",21),e.j41(2,"ion-label")(3,"h2"),e.EFF(4,"Nombre"),e.k0s(),e.j41(5,"ion-input",28),e.mxI("ngModelChange",function(o){e.eBV(n);const s=e.XpG(2);return e.DH7(s.customerInfo.name,o)||(s.customerInfo.name=o),e.Njj(o)}),e.k0s()()()}if(2&i){const n=e.XpG(2);e.R7$(5),e.R50("ngModel",n.customerInfo.name)}}function h(i,a){if(1&i&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&i){const n=e.XpG(2);e.R7$(),e.JRh(1===(null==n.customerInfo?null:n.customerInfo.type)?"Bueno":2===(null==n.customerInfo?null:n.customerInfo.type)?"Regular":"Malo")}}function _(i,a){if(1&i){const n=e.RV6();e.j41(0,"ion-select",29),e.mxI("ngModelChange",function(o){e.eBV(n);const s=e.XpG(2);return e.DH7(s.customerInfo.type,o)||(s.customerInfo.type=o),e.Njj(o)}),e.j41(1,"ion-select-option",30),e.EFF(2,"Bueno"),e.k0s(),e.j41(3,"ion-select-option",31),e.EFF(4,"Regular"),e.k0s(),e.j41(5,"ion-select-option",32),e.EFF(6,"Malo"),e.k0s()()}if(2&i){const n=e.XpG(2);e.R50("ngModel",n.customerInfo.type)}}function C(i,a){if(1&i){const n=e.RV6();e.j41(0,"ion-footer",33)(1,"div",34)(2,"ion-button",35),e.nrm(3,"ion-icon",36),e.EFF(4," Guardar "),e.k0s(),e.j41(5,"ion-button",37),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.cancelEdit())}),e.nrm(6,"ion-icon",38),e.EFF(7," Cancelar "),e.k0s()()()}}function I(i,a){if(1&i){const n=e.RV6();e.j41(0,"form",2,0),e.bIt("ngSubmit",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.saveChanges())}),e.j41(2,"div",3)(3,"ion-avatar",4),e.nrm(4,"img",5),e.k0s(),e.j41(5,"h2"),e.EFF(6),e.k0s(),e.j41(7,"p"),e.EFF(8),e.k0s()(),e.j41(9,"div",6)(10,"ion-button",7),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.goBack())}),e.nrm(11,"ion-icon",8),e.EFF(12," Regresar "),e.k0s(),e.j41(13,"ion-button",9),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.toggleEditMode())}),e.nrm(14,"ion-icon",10),e.EFF(15," Editar "),e.k0s(),e.j41(16,"ion-button",11),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.confirmDelete())}),e.nrm(17,"ion-icon",12),e.EFF(18," Eliminar "),e.k0s()(),e.j41(19,"div",13)(20,"div",14)(21,"h3"),e.EFF(22,"Detalles del Cliente"),e.k0s()(),e.j41(23,"ion-list",15),e.DNE(24,p,6,1,"ion-item",16),e.j41(25,"ion-item"),e.nrm(26,"ion-icon",17),e.j41(27,"ion-label")(28,"h2"),e.EFF(29,"Direcci\xf3n"),e.k0s(),e.j41(30,"ion-input",18),e.mxI("ngModelChange",function(o){e.eBV(n);const s=e.XpG();return e.DH7(s.customerInfo.address,o)||(s.customerInfo.address=o),e.Njj(o)}),e.k0s()()(),e.j41(31,"ion-item"),e.nrm(32,"ion-icon",19),e.j41(33,"ion-label")(34,"h2"),e.EFF(35,"Tel\xe9fono"),e.k0s(),e.j41(36,"ion-input",20),e.mxI("ngModelChange",function(o){e.eBV(n);const s=e.XpG();return e.DH7(s.customerInfo.phone,o)||(s.customerInfo.phone=o),e.Njj(o)}),e.k0s()()(),e.j41(37,"ion-item"),e.nrm(38,"ion-icon",21),e.j41(39,"ion-label")(40,"h2",22),e.EFF(41,"Tipo de Cliente"),e.k0s(),e.DNE(42,h,2,1,"p",16)(43,_,7,1,"ion-select",23),e.k0s()(),e.j41(44,"ion-item"),e.nrm(45,"ion-icon",24),e.j41(46,"ion-label")(47,"h2"),e.EFF(48,"\xdaltima Actualizaci\xf3n"),e.k0s(),e.j41(49,"p"),e.EFF(50),e.k0s()(),e.j41(51,"ion-button",25),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.viewCustomerHistory())}),e.nrm(52,"ion-icon",26),e.EFF(53," Historial "),e.k0s()()(),e.DNE(54,C,8,0,"ion-footer",27),e.k0s()()}if(2&i){const n=e.XpG();e.R7$(6),e.JRh(n.customerInfo.name),e.R7$(2),e.JRh(n.customerInfo.phone),e.R7$(16),e.Y8G("ngIf",n.isEditMode),e.R7$(6),e.R50("ngModel",n.customerInfo.address),e.Y8G("readonly",!n.isEditMode),e.R7$(6),e.R50("ngModel",n.customerInfo.phone),e.Y8G("readonly",!n.isEditMode),e.R7$(4),e.Y8G("ngStyle",e.eq3(12,g,n.isEditMode?"bold":"normal")),e.R7$(2),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("ngIf",n.isEditMode),e.R7$(7),e.JRh(null==n.customerInfo?null:n.customerInfo.updated_at),e.R7$(4),e.Y8G("ngIf",n.isEditMode)}}const b=[{path:"",component:(()=>{var i;class a{constructor(t,o,s,j,k){this.route=t,this.http=o,this.router=s,this.alertController=j,this.toastController=k,this.customerInfo=null,this.isEditMode=!1,this.originalCustomerInfo=null}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&this.fetchCustomerInfo(t)}fetchCustomerInfo(t){this.http.get(`https://muebleriasolaris.com/ionic-users/cliente_id_info.php?id=${t}`).subscribe({next:o=>{"success"===o.status?(this.customerInfo=o.data,this.originalCustomerInfo=JSON.parse(JSON.stringify(o.data))):console.error("Failed to fetch customer information")},error:o=>{console.error("Error fetching customer info:",o)}})}toggleEditMode(){this.isEditMode=!this.isEditMode,this.isEditMode&&this.customerInfo?this.customerInfo.updated_at=(new Date).toLocaleString():this.isEditMode||(this.customerInfo=JSON.parse(JSON.stringify(this.originalCustomerInfo)))}saveChanges(){var t;this.customerInfo&&this.alertController.create({header:"Confirmar actualizaci\xf3n",message:`\xbfEst\xe1s seguro de que deseas actualizar a ${null===(t=this.customerInfo)||void 0===t?void 0:t.name}?`,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Actualizar",handler:()=>{this.confirmchanges()}}]}).then(s=>s.present())}confirmchanges(){console.log("Customer Info to be updated:",this.customerInfo),this.http.post("https://muebleriasolaris.com/ionic-users/update_cliente_info.php",this.customerInfo).subscribe({next:()=>{console.log("Customer info updated successfully"),this.isEditMode=!1,this.originalCustomerInfo=JSON.parse(JSON.stringify(this.customerInfo)),this.toastController.create({message:"Cliente actualizado exitosamente.",duration:2e3,color:"success"}).then(t=>t.present()),window.location.href="/clientes"},error:t=>{console.error("Error updating customer info:",t)}})}cancelEdit(){this.originalCustomerInfo&&(this.customerInfo=JSON.parse(JSON.stringify(this.originalCustomerInfo))),this.isEditMode=!1}goBack(){this.router.navigate(["/clientes"])}getCustomerTypeText(t){switch(t){case 1:return"Bueno";case 2:return"Regular";case 0:return"Malo";default:return"Desconocido"}}viewCustomerHistory(){var t;null!==(t=this.customerInfo)&&void 0!==t&&t.id?this.router.navigate(["/historial-cliente",this.customerInfo.id]):console.error("El ID del cliente no est\xe1 definido")}confirmDelete(){var t;this.alertController.create({header:"Confirmar eliminaci\xf3n",message:`\xbfEst\xe1s seguro de que deseas eliminar a ${null===(t=this.customerInfo)||void 0===t?void 0:t.name}?`,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:()=>{this.deleteCustomer()}}]}).then(s=>s.present())}deleteCustomer(){var t;this.http.post("https://muebleriasolaris.com/ionic-users/delete_cliente.php",{id:null===(t=this.customerInfo)||void 0===t?void 0:t.id}).subscribe({next:()=>{this.router.navigate(["/clientes"]),this.toastController.create({message:"Cliente eliminado exitosamente.",duration:2e3,color:"success"}).then(o=>o.present())},error:o=>{console.error("Error eliminando cliente:",o),this.toastController.create({message:"Error al eliminar cliente. Intenta nuevamente.",duration:2e3,color:"danger"}).then(s=>s.present())}})}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(u.nX),e.rXU(m.Qq),e.rXU(u.Ix),e.rXU(r.hG),e.rXU(r.K_))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-cliente-info"]],decls:6,vars:1,consts:[["updateForm","ngForm"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"profile-header"],[1,"profile-avatar"],["src","assets/user_src.png","alt","Client Picture"],[1,"top-button-container"],["color","light",1,"regresar-button",3,"click"],["name","arrow-back-outline","slot","start"],["color","secondary",3,"click"],["name","create-outline","slot","start"],["color","danger",3,"click"],["name","trash-outline","slot","start"],[1,"account-info"],[1,"top-cliente"],["lines","none"],[4,"ngIf"],["name","location-outline","slot","start"],["name","address","placeholder","Direcci\xf3n","required","",3,"ngModelChange","ngModel","readonly"],["name","call-outline","slot","start"],["name","phone","placeholder","Tel\xe9fono","required","",3,"ngModelChange","ngModel","readonly"],["name","person-outline","slot","start"],[3,"ngStyle"],[3,"ngModel","ngModelChange",4,"ngIf"],["name","time-outline","slot","start"],["expand","block","color","success",1,"ver-historial",3,"click"],["slot","start","name","eye"],["class","edit-footer",4,"ngIf"],["name","name","placeholder","Nombre","required","",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","0"],[1,"edit-footer"],[1,"bottom-action-buttons"],["type","submit","expand","block","color","success",1,"guardar-button"],["slot","start","name","checkmark-outline"],["type","button","expand","block","color","danger",1,"cancelar-button",3,"click"],["slot","start","name","close-outline"]],template:function(t,o){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Actualizar Informaci\xf3n del Cliente"),e.k0s()()(),e.j41(4,"ion-content"),e.DNE(5,I,55,14,"form",1),e.k0s()),2&t&&(e.R7$(5),e.Y8G("ngIf",o.customerInfo))},dependencies:[f.bT,f.B3,c.qT,c.BC,c.cb,c.YS,c.vS,c.cV,r.mC,r.Jm,r.W9,r.M0,r.eU,r.iq,r.$w,r.uz,r.he,r.nf,r.Nm,r.Ip,r.BC,r.ai,r.Je,r.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: #f7f7f7}.profile-header[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;background:linear-gradient(to bottom,#3880ff,#dfdfdf);color:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:800px;margin:0 auto}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:10px;border-radius:50%;overflow:hidden;border:3px solid white}.top-button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:10px 0;background:#3880ff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;max-width:800px;margin:-20px auto 0}.top-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:auto;font-size:.9rem}.regresar-button[_ngcontent-%COMP%]::part(native){background-color:#fff!important;color:#2f4f4f}.account-info[_ngcontent-%COMP%]{padding:30px;margin:30px 0 0;background:#fff;border-radius:15px;box-shadow:0 4px 8px #0000001a;max-width:700px;text-align:left}ion-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:5px}ion-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:#666}.bottom-action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 0 10px;margin:0 auto;max-width:700px}.bottom-action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 10px;font-weight:700;color:#fff;--border-radius: 8px;--padding: 10px 0}.guardar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #28a745, #218838);color:#fff}.cancelar-button[_ngcontent-%COMP%]::part(native){--background: linear-gradient(to right, #dc3545, #c82333)}@media (min-width: 768px){.profile-header[_ngcontent-%COMP%], .account-info[_ngcontent-%COMP%], .top-button-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;font-size:.78rem}.top-button-container[_ngcontent-%COMP%]{margin-top:-15px}}.ver-historial[_ngcontent-%COMP%]::part(native){--background-color: linear-gradient(to right, #3880ff, #8fb1ee);padding:8px;color:#fff}.edit-footer[_ngcontent-%COMP%]{box-shadow:none}"]}),a})()}];let x=(()=>{var i;class a{}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.iI.forChild(b),u.iI]}),a})(),M=(()=>{var i;class a{}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[f.MD,c.YN,r.bv,x]}),a})()}}]);