"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8817],{8817:(y,d,l)=>{l.r(d),l.d(d,{ClientesPageModule:()=>x});var g=l(177),p=l(4341),r=l(4742),u=l(1671),m=l(1626),e=l(4438),h=l(4796);let C=(()=>{var t;class s{constructor(){}ngOnInit(){}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"custom-footer"],[1,"footer-title"]],template:function(n,o){1&n&&(e.j41(0,"ion-footer",0)(1,"ion-toolbar")(2,"ion-title",1),e.EFF(3,"Copyright \xa9 2024 Muebleria Solaris"),e.k0s()()())},dependencies:[r.M0,r.BC,r.ai],styles:['@charset "UTF-8";.footer-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:400;text-align:center}.footer-top[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 770px){ion-footer[_ngcontent-%COMP%]{display:none}}']}),s})();function P(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-button",10),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.goToAddClient())}),e.nrm(1,"ion-icon",11),e.EFF(2," Agregar Cliente "),e.k0s()}}function f(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-item-options",17)(1,"ion-item-option",18),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,a=e.XpG();return e.Njj(a.viewCustomerDetails(o.id))}),e.EFF(2," Ver Perfil "),e.k0s()()}}function _(t,s){if(1&t&&(e.j41(0,"ion-item-sliding")(1,"ion-item",12)(2,"ion-col",6),e.EFF(3),e.k0s(),e.j41(4,"ion-col",6),e.EFF(5),e.k0s(),e.j41(6,"ion-col",13),e.EFF(7),e.k0s(),e.j41(8,"ion-col",14)(9,"span",15),e.EFF(10),e.k0s()()(),e.DNE(11,f,3,0,"ion-item-options",16),e.k0s()),2&t){const i=s.$implicit,n=e.XpG();e.R7$(3),e.JRh(null==i?null:i.name),e.R7$(2),e.JRh(i.address),e.R7$(2),e.JRh(i.phone),e.R7$(2),e.Y8G("ngClass",n.getCustomerTypeClass(i.type)),e.R7$(),e.SpI(" ",n.getCustomerTypeName(i.type)," "),e.R7$(),e.Y8G("ngIf",n.isAdmin)}}const b=[{path:"",component:(()=>{var t;class s{constructor(n,o,a){this.http=n,this.authService=o,this.router=a,this.customers=[],this.paginatedCustomers=[],this.itemsPerPage=10,this.currentPage=1,this.searchTerm="",this.isAdmin=!1}ngOnInit(){this.loadCustomers(),this.isAdmin=this.authService.isAdmin()}loadCustomers(n=""){let o="https://muebleriasolaris.com/ionic-users/clientes.php";n&&(o="https://muebleriasolaris.com/ionic-users/clientes_search.php");let a=new m.Nl;n&&(a=a.set("search",n)),this.http.get(o,{params:a}).subscribe(c=>{c&&c.data?(this.customers=c.data,this.currentPage=1,this.paginateCustomers()):console.error("Error en la respuesta de la API:",c)},c=>{console.error("Error al cargar clientes:",c)})}onSearchInput(){this.loadCustomers(this.searchTerm)}paginateCustomers(){this.paginatedCustomers=this.customers.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage)}nextPage(){this.currentPage*this.itemsPerPage<this.customers.length&&(this.currentPage++,this.paginateCustomers())}prevPage(){this.currentPage>1&&(this.currentPage--,this.paginateCustomers())}getCustomerTypeName(n){switch(parseInt(n,10)){case 2:return"Malo";case 1:return"Regular";case 0:return"Bueno";default:return"Desconocido"}}getCustomerTypeClass(n){switch(parseInt(n,10)){case 0:return"success";case 1:return"warning";case 2:return"danger";default:return"medium"}}viewCustomerDetails(n){this.isAdmin?this.router.navigate(["/cliente-info",n]):console.warn("Access denied. Only admins can view customer details.")}goToAddClient(){this.router.navigate(["/agregar-clientes"])}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(m.Qq),e.rXU(h.u),e.rXU(u.Ix))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-clientes"]],decls:29,vars:7,consts:[["color","primary"],[1,"search-container"],["placeholder","Buscar por nombre, direcci\xf3n o t\xe9lefono",1,"search-bar",3,"ngModelChange","ionInput","ngModel"],["class","add-client-button","color","primary",3,"click",4,"ngIf"],[1,"customer-table"],[1,"header-row"],["size","3"],[4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click","disabled"],["color","primary",1,"add-client-button",3,"click"],["slot","start","name","add-outline"],[1,"item-val"],["size","3",1,"cel-center"],["size","3",1,"customer-type"],[1,"type-label",3,"ngClass"],["side","start",4,"ngIf"],["side","start"],["color","primary",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3,"Clientes"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",1)(6,"ion-searchbar",2),e.mxI("ngModelChange",function(c){return e.DH7(o.searchTerm,c)||(o.searchTerm=c),c}),e.bIt("ionInput",function(){return o.onSearchInput()}),e.k0s(),e.DNE(7,P,3,0,"ion-button",3),e.k0s(),e.j41(8,"ion-grid",4)(9,"ion-row",5)(10,"ion-col",6)(11,"strong"),e.EFF(12,"Nombre"),e.k0s()(),e.j41(13,"ion-col",6)(14,"strong"),e.EFF(15,"Direcci\xf3n"),e.k0s()(),e.j41(16,"ion-col",6)(17,"strong"),e.EFF(18,"Tel\xe9fono"),e.k0s()(),e.j41(19,"ion-col",6)(20,"strong"),e.EFF(21,"Tipo de Cliente"),e.k0s()()(),e.DNE(22,_,12,6,"ion-item-sliding",7),e.k0s(),e.j41(23,"div",8)(24,"ion-button",9),e.bIt("click",function(){return o.prevPage()}),e.EFF(25,"Anterior"),e.k0s(),e.j41(26,"ion-button",9),e.bIt("click",function(){return o.nextPage()}),e.EFF(27,"Siguiente"),e.k0s()()(),e.nrm(28,"app-footer")),2&n&&(e.R7$(5),e.AVh("is-not-admin",o.isAdmin),e.R7$(),e.R50("ngModel",o.searchTerm),e.R7$(),e.Y8G("ngIf",o.isAdmin),e.R7$(15),e.Y8G("ngForOf",o.paginatedCustomers),e.R7$(2),e.Y8G("disabled",1===o.currentPage),e.R7$(2),e.Y8G("disabled",o.currentPage*o.itemsPerPage>=o.customers.length))},dependencies:[g.YU,g.Sq,g.bT,p.BC,p.vS,r.Jm,r.hU,r.W9,r.lO,r.eU,r.iq,r.uz,r.LU,r.CE,r.A7,r.ln,r.S1,r.BC,r.ai,r.Gw,C],styles:['@charset "UTF-8";.customer-table[_ngcontent-%COMP%]{width:100%;margin:0 auto;text-align:center;border-collapse:collapse}.header-row[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;text-align:center;border-bottom:2px solid #ccc;padding:10px 0}.data-row[_ngcontent-%COMP%]{text-align:center;padding:10px 0}.customer-type[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.type-indicator[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;margin-right:8px;box-shadow:0 4px 8px #0000004d;transition:transform .3s ease,box-shadow .3s ease}.type-indicator[_ngcontent-%COMP%]:hover{transform:scale(1.2);box-shadow:0 6px 12px #0006}.type-label[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;color:#fff;font-weight:700;border-radius:12px;text-align:center;min-width:60px}.type-label.success[_ngcontent-%COMP%]{background-color:#4caf50}.type-label.warning[_ngcontent-%COMP%]{background-color:#1e3a8a}.type-label.danger[_ngcontent-%COMP%]{background-color:#cb2a2a}.type-label.medium[_ngcontent-%COMP%]{background-color:#9e9e9e}.search-bar[_ngcontent-%COMP%]{margin-top:20px}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px;flex-wrap:wrap}.pagination-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:5px}@media (max-width: 576px){.customer-table[_ngcontent-%COMP%]{width:100%;margin:0}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .data-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{font-size:14px}.pagination-controls[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;padding:0 10px}.pagination-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:5px;min-width:45%;display:block}}@media (max-width: 770px){.item-val[_ngcontent-%COMP%]{font-size:12px}}.cel-center[_ngcontent-%COMP%]{text-align:center}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;background-color:#f4f4f4}.search-bar[_ngcontent-%COMP%]{flex:1}.add-client-button[_ngcontent-%COMP%]{margin-top:20px;white-space:nowrap}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{flex-direction:column-reverse}.search-bar[_ngcontent-%COMP%]{margin-top:10px;width:100%;padding-bottom:0}.add-client-button[_ngcontent-%COMP%]{padding:0 10px;width:100%}.is-not-admin[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{padding-top:15px}.is-not-admin[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{padding-bottom:0}}']}),s})()}];let M=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[u.iI.forChild(b),u.iI]}),s})(),x=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.MD,p.YN,r.bv,M]}),s})()}}]);